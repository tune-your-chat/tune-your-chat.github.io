<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />
    
    <meta property="og:url" content="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;matthew-hodgson&#x2F;page&#x2F;3&#x2F;" />
    
    
    
    
    <meta property="og:title" content="Matrix.org" />
    
    
    
    <meta property="og:description" content="Matrix, the open protocol for secure decentralised communications" />
    <meta name="description" content="Matrix, the open protocol for secure decentralised communications" />
    
    <meta property="og:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    <meta name="twitter:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    
    <title>Matrix.org - Matthew Hodgson</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href=https://tune-your-chat.github.io/style.css?h=0d1a23c06b707a231261 />
    <script async src=https://tune-your-chat.github.io/js/components.js?h=ae3cb894d00e16ef08be></script>
    <script defer data-domain="matrix.org" src="https://plausible.io/js/script.tagged-events.js"></script>


    
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://tune-your-chat.github.io/author/matthew-hodgson/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="https:&#x2F;&#x2F;spec.matrix.org" class="
            ">
            Spec
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="foundation-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="foundation-submenu-checkbox" class="submenu-title">Foundation <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;foundation&#x2F;about&#x2F;">About Matrix</a>
                    
                    <a href="&#x2F;foundation&#x2F;governing-board-elections&#x2F;">Governing Board Elections 2024</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Docs
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;tune&#x2F;">Tune Your Chat</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;support" class="
            ">
            Donate
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Matthew Hodgson</h1>
            158 posts tagged with "Matthew Hodgson" <a href="/author">(See all Author)</a>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;09&#x2F;13&#x2F;vulnerability-disclosure-key-sharing&#x2F;" title="Disclosing CVE-2021-40823 and CVE-2021-40824: E2EE vulnerability in multiple Matrix clients">Disclosing CVE-2021-40823 and CVE-2021-40824: E2EE vulnerability in multiple Matrix clients</a></h2>
                <span>
                    13.09.2021 17:29
                    —
                    <a href="/category/security">
                        Security
                    </a>
                    —
                    <a
                        href="/author/denis-kasak">
                        Denis Kasak
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Today we are disclosing a critical security issue affecting multiple Matrix clients and libraries including <a href="https://element.io/">Element</a> (Web/Desktop/Android), <a href="https://fluffychat.im/">FluffyChat</a>, <a href="https://nheko-reborn.github.io/">Nheko</a>, <a href="https://cinny.in/">Cinny</a>, and <a href="https://schildi.chat/">SchildiChat</a>. Element on iOS is not affected.</p>
<p>Specifically, in certain circumstances it may be possible to trick vulnerable clients into disclosing encryption keys for messages previously sent by that client to user accounts later compromised by an attacker.</p>
<p>Exploiting this vulnerability to read encrypted messages requires gaining control over the recipient’s account. This requires either compromising their credentials directly or compromising their homeserver.</p>
<p>Thus, the greatest risk is to users who are in encrypted rooms containing malicious servers. Admins of malicious servers could attempt to impersonate their users' devices in order to spy on messages sent by vulnerable clients in that room.</p>
<p>This is not a vulnerability in the Matrix or Olm/Megolm protocols, nor the libolm implementation. It is an implementation bug in certain Matrix clients and SDKs which support end-to-end encryption (“E2EE”).</p>
<p><strong>We have no evidence of the vulnerability being exploited in the wild</strong>.</p>
<p>This issue was discovered during an internal audit by Denis Kasak, a security researcher at Element.</p>
<h2 id="remediation-and-detection">Remediation and Detection</h2>
<p>Patched versions of affected clients are available now; please upgrade as soon as possible — we apologise sincerely for the inconvenience. If you are unable to upgrade, consider keeping vulnerable clients offline until you can. If vulnerable clients are offline, they cannot be tricked into disclosing keys. They may safely return online once updated.</p>
<p>Unfortunately, it is difficult or impossible to retroactively identify instances of this attack with standard logging levels present on both clients and servers. However, as the attack requires account compromise, homeserver administrators may wish to review their authentication logs for any indications of inappropriate access.</p>
<p>Similarly, users should review the list of devices connected to their account with an eye toward missing, untrusted, or non-functioning devices. Because an attacker must impersonate an existing or historical device, exploiting this vulnerability would either break an existing login on the user’s account, or a historical device would be re-added and flagged as untrusted.</p>
<p>Lastly, if you have previously verified the users / devices in a room, you would witness the safety shield on the room turn red during the attack, indicating the presence of an untrusted and potentially malicious device.</p>
<h2 id="affected-software">Affected Software</h2>
<p>Given the severity of this issue, Element attempted to review all known encryption-capable Matrix clients and libraries so that patches could be prepared prior to public disclosure.</p>
<p>Known <strong>vulnerable</strong> software:</p>
<ul>
<li><strong><a href="https://github.com/matrix-org/matrix-js-sdk">matrix-js-sdk</a> &lt; 12.4.1</strong> (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-40823">CVE-2021-40823</a>), including:
<ul>
<li><a href="https://element.io/">Element</a> Web / Desktop &lt; 1.8.3</li>
<li><a href="https://schildi.chat/">SchildiChat</a> (Web / Desktop) ≤ 1.7.32-sc1</li>
<li><a href="https://cinny.in/">Cinny</a> &lt; 1.2.1</li>
</ul>
</li>
<li><strong><a href="https://github.com/matrix-org/matrix-android-sdk2">matrix-android-sdk2</a> &lt; 1.2.2</strong> (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-40824">CVE-2021-40824</a>), including:
<ul>
<li><a href="https://element.io/">Element</a> (Android) &lt; 1.2.2</li>
<li><a href="https://schildi.chat/">SchildiChat</a> (Android) &lt; 1.2.2.sc43</li>
</ul>
</li>
<li><strong><a href="https://github.com/matrix-org/matrix-rust-sdk">matrix-rust-sdk</a> &lt; 0.4.0:</strong>
<ul>
<li><a href="https://gitlab.gnome.org/GNOME/fractal/-/tree/fractal-next">fractal-next</a> is <strong>not vulnerable</strong> due to depending on a recent enough commit.</li>
<li><a href="https://github.com/poljar/weechat-matrix-rs/">weechat-matrix-rs</a>, a rewrite of the original weechat-matrix script, had no tagged releases, but some commits did depend on vulnerable versions of the matrix-rust-sdk. Users should ensure to update to the latest master of weechat-matrix-rs, presently <a href="https://github.com/poljar/weechat-matrix-rs/commit/2b093a7ff1c75650467d61335b90e4a6ce1fa210">2b093a7</a>.</li>
</ul>
</li>
<li><strong><a href="https://github.com/famedly/matrix-dart-sdk">FamedlySDK</a> &lt; 0.5.0</strong>, including:
<ul>
<li>Famedly &lt; 0.45.0</li>
<li><a href="https://fluffychat.im/">FluffyChat</a> &lt; 0.40.0</li>
</ul>
</li>
<li><strong><a href="https://nheko-reborn.github.io/">Nheko</a> ≤ 0.8.2</strong></li>
</ul>
<p>We believe the following software is <strong>not vulnerable:</strong></p>
<ul>
<li><strong><a href="https://github.com/matrix-org/matrix-android-sdk">matrix-android-sdk</a></strong> (deprecated!)</li>
<li><strong><a href="https://github.com/matrix-org/matrix-ios-sdk">matrix-ios-sdk</a></strong></li>
<li><strong><a href="https://github.com/poljar/matrix-nio">matrix-nio</a></strong>, including its use in<a href="https://github.com/matrix-org/pantalaimon"> Pantalaimon</a> and <a href="https://github.com/poljar/weechat-matrix">weechat-matrix</a>.</li>
</ul>
<p>We believe the following are <strong>not vulnerable</strong> due to not implementing key sharing:</p>
<ul>
<li><strong><a href="https://source.puri.sm/Librem5/chatty/-/tree/master/src/matrix">Chatty</a></strong></li>
<li><strong><a href="https://github.com/vector-im/hydrogen-web/tree/master/src/matrix">Hydrogen</a></strong></li>
<li><strong><a href="https://github.com/mautrix/go">mautrix</a></strong></li>
<li><strong><a href="https://github.com/matrix-org/purple-matrix">purple-matrix</a></strong></li>
<li><strong><a href="https://github.com/syphon-org/syphon">Syphon</a></strong></li>
</ul>
<h2 id="background">Background</h2>
<p>Matrix supports the concept of “key sharing”, letting a Matrix client which lacks the keys to decrypt a message request those keys from that user's other devices or the original sender's device.</p>
<p>This was a feature added in 2016 in order to address edge cases where a newly logged-in device might not have the necessary keys to decrypt historical messages.  Specifically, if other devices in the room are unaware of the new device due to a network partition, they have no way to encrypt for it—meaning that the only way the new device will be able to decrypt history is if the recipient's other devices share the necessary keys with it.</p>
<p>Other situations where key sharing is desirable include when the recipient hasn't backed up their keys (either online or offline) and needs them to decrypt history on a new login, or when facing implementation bugs which prevent clients from sending keys correctly. Requesting keys from a user's other devices sidesteps these issues.</p>
<p>Key sharing is described <a href="https://matrix.org/docs/guides/end-to-end-encryption-implementation-guide#key-sharing">here</a> in the Matrix E2EE Implementation Guide, which contains the following paragraph:</p>
<blockquote>
<p>In order to securely implement key sharing, clients must not reply to every key request they receive. The recommended strategy is to share the keys automatically only to verified devices of the same user.</p>
</blockquote>
<p>This is the approach taken in the original implementation in matrix-js-sdk, as used in Element Web and others, with the extension of also letting the sending device service keyshare requests from recipient devices.  Unfortunately, the implementation did not sufficiently verify the identity of the device requesting the keyshare, meaning that a compromised account can impersonate the device requesting the keys, creating this vulnerability.</p>
<p>This is not a protocol or specification bug, but an implementation bug which was then unfortunately replicated in other independent implementations.</p>
<p>While we believe we have identified and contacted all affected E2EE client implementations: if your client implements key sharing requests, we strongly recommend you check that you cryptographically verify the identity of the device which originated the key sharing request.</p>
<h2 id="next-steps">Next Steps</h2>
<p>The fact that this vulnerability was independently introduced so many times is a clear signal that the current wording in the Matrix Spec and the E2EE Implementation Guide is insufficient. We will thoroughly review the related documentation and revise it with clear guidelines on safely implementing key sharing.</p>
<p>Going further, we will also consider whether key sharing is still a necessary part of the Matrix protocol. If it is not, we will remove it. As discussed above, key sharing was originally introduced to make E2EE more reliable while we were ironing out its many edge cases and failure modes. Meanwhile, implementations have become much more robust, to the point that we may be able to go without key sharing completely. We will also consider changing how we present situations in which you cannot decrypt messages because the original sender was not aware of your presence. For example, undecryptable messages could be filed in a separate conversation thread, or those messages could require that keys are shared manually, effectively turning a bug into a feature.</p>
<p>We will also accelerate our work on matrix-rust-sdk as a portable reference implementation of the Matrix protocol, avoiding the implicit requirement that each independent library must necessarily reimplement this logic on its own. This will have the effect of reducing attack surface and simplifying audits for software which chooses to use matrix-rust-sdk.</p>
<p>Finally, we apologise to the wider Matrix community for the inconvenience and disruption of this issue.  While Element discovered this vulnerability during an internal audit of E2EE implementations, we will be funding an independent end-to-end audit of the reference Matrix E2EE implementations (not just Olm + libolm) in the near future to help mitigate the risk from any future vulnerabilities. The results of this audit will be made publicly available.</p>
<h2 id="timeline">Timeline</h2>
<p>Ultimately, Element took two weeks from initial discovery to completing an audit of all known, public E2EE implementations. It took a further week to coordinate disclosure, culminating in today's announcement.</p>
<ul>
<li>Monday, 23rd August — Discovery that Element Web is exploitable.</li>
<li>Thursday, 26th August — Determination that Element Android is exploitable with a modified attack.</li>
<li>Wednesday, 1 September — Determination that Element iOS fails safe in the presence of device changes.</li>
<li>Friday, 3 September — Determination that FluffyChat and Nheko are exploitable.</li>
<li>Tuesday, 7th September — Audit of Matrix clients and libraries complete.</li>
<li>Wednesday, 8th September — Affected software authors contacted, disclosure timelines agreed.</li>
<li>Friday, 10th September —<a href="https://matrix.org/blog/2021/09/10/pre-disclosure-upcoming-critical-fix-for-several-popular-matrix-clients"> Public pre-disclosure notification</a>. Downstream packagers (e.g., Linux distributions) notified via Matrix and e-mail.</li>
<li>Monday, 13th September — Coordinated releases of all affected software, public disclosure.</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;07&#x2F;27&#x2F;element-raises-30m-to-boost-matrix&#x2F;" title="Element raises $30M to boost Matrix">Element raises $30M to boost Matrix</a></h2>
                <span>
                    27.07.2021 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>Big news today: Element, the startup founded by the team who created Matrix,
just raised $30M of Series B funding in order to further accelerate Matrix
development and improve Element, the flagship Matrix app. The round is led by
our friends at <a href="https://protocol.ai">Protocol Labs</a> and <a href="https://metaplanet.com">Metaplanet</a>,
the fund established by Jaan Tallinn (co-founder of
Skype and Kazaa).  Both Protocol Labs and Metaplanet are spectacularly on
board our decentralised communication quest, and you couldn't really ask for
a better source of funding to help take Matrix to the next level.  Thank you
for believing in Matrix and leading Element's latest funding!</p>
<p>You can read all about it from the Element perspective over at the
<a href="https://element.io/blog/element-raises-30m-as-matrix-explodes">Element Blog</a>,
but suffice it to say that this is enormous news for the Matrix ecosystem as a
whole.  In addition to transforming the Element app, on the Matrix side this
means that there is now concrete funding secured to:</p>
<ul>
<li>
<p>finish building out <a href="https://matrix.org/blog/2021/05/06/introducing-the-pinecone-overlay-network">P2P Matrix</a>
and get it live (including finishing Dendrite, given our P2P work builds on Dendrite!)</p>
</li>
<li>
<p>implement <a href="https://twitter.com/matrixdotorg/status/1419820122143961093">native decentralised E2EE voip/video conferencing</a> for Matrix</p>
</li>
<li>
<p>fully build out our
<a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">relative decentralised reputation system</a>
in order to combat abuse in Matrix.</p>
</li>
</ul>
<p>Obviously this is in addition to all the normal business-as-usual work going
on in terms of:</p>
<ul>
<li>getting <a href="https://element.io/blog/spaces-the-next-frontier/">Spaces</a> out of beta</li>
<li>adding Threading to Element (yes, it's finally happening!)</li>
<li>speeding up room joins over federation</li>
<li>creating 'sync v3' to lazy-load all content and make the API super-snappy</li>
<li>lots of little long-overdue fun bits and pieces (yes, custom emoji, we're looking at you).</li>
</ul>
<p>If you're wondering whether Protocol Labs' investment means that we'll be
seeing more overlap between <a href="https://ipfs.io">IPFS</a> and Matrix, then yes -
where it makes tech sense to do so, we're hoping to work more closely
together; for instance collaborating with the libp2p team on our P2P work
(we still need to experiment properly with gossipsub!), or perhaps giving
<a href="https://github.com/matrix-org/matrix-doc/blob/travis/msc/ipfs/proposals/2706-IPFS.md">MSC2706</a>
some attention.  However, there are no plans to use cryptocurrency incentives
in Matrix or Element any time soon.</p>
<p>So, exciting times ahead!  We'd like to inordinately thank everyone who has
supported Matrix over the years - especially our Patreon supporters, whose
donations pay for all the matrix.org infrastructure while inspiring others to
open their cheque books; the existing investors at Element (especially <a href="https://notion.vc">Notion</a>
and <a href="https://automattic.com">Automattic</a>, who have come in again on this round); all the large scale
Matrix deployments out there which are effectively turning Matrix into an
industry (hello <a href="https://matrix.org/blog/2021/07/21/germanys-national-healthcare-system-adopts-matrix">gematik!</a>) -
and everyone who has ever run a Matrix server, contributed code, used the
spec to make their own Matrix-powered creation, or simply chatted on Matrix.</p>
<p>Needless to say, Matrix wouldn't exist without you: the protocol and network
would have fizzled out long ago were it not for all the people supporting it
(the matrix.org server can now see over 35.5M addressable users on the
network!) - and meanwhile the ever-increasing energy of the community and the
core team combines to keep the protocol advancing forwards faster than ever.</p>
<p>We will do everything we possibly can to succeed in creating the long-awaited
secure communication layer of the open Web, and we look forward to large
amounts of Element's new funding being directed directly into core Matrix
development :)</p>
<p>thanks for flying Matrix,</p>
<p>Matthew, Amandine &amp; the whole Matrix core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;07&#x2F;26&#x2F;dendrite-0-4-1-released&#x2F;" title="Dendrite 0.4.1 Released">Dendrite 0.4.1 Released</a></h2>
                <span>
                    26.07.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>It's only been two weeks since Dendrite 0.4 landed, but there's already a
significant new release with Dendrite 0.4.1 (it's amazing how much work we
can do on Dendrite when not off chasing low-bandwidth and P2P Matrix!)</p>
<p>This release further improves memory performance and radically improves
state resolution performance (rumour has it that it's a 10x speed-up).
Meanwhile, SS API sytest coverage is up to 91%(!!) and CS API is now at 63%.</p>
<p>We're going to try to keep the pressure up over the coming weeks - and once
sytest is at 100% coverage (and we're not missing any big features which sytest
doesn't cover yet) we'll be declaring a 1.0 :)</p>
<p>If you're running Dendrite, please upgrade.  If not, perhaps this would be a
good version to give it a try?  You can get it, as always from,
https://github.com/matrix-org/dendrite/releases/tag/v0.4.1.  The changelog
follows:</p>
<h3 id="features">Features</h3>
<ul>
<li>Support for room version 7 has been added</li>
<li>Key notary support is now more complete, allowing Dendrite to be used as a notary server for looking up signing keys</li>
<li>State resolution v2 performance has been optimised further by caching the create event, power levels and join rules in memory instead of parsing them repeatedly</li>
<li>The media API now handles cases where the maximum file size is configured to be less than 0 for unlimited size</li>
<li>The <code>initial_state</code> in a <code>/createRoom</code> request is now respected when creating a room</li>
<li>Code paths for checking if servers are joined to rooms have been optimised significantly</li>
</ul>
<h3 id="fixes">Fixes</h3>
<ul>
<li>A bug resulting in <code>cannot xref null state block with snapshot</code> during the new state storage migration has been fixed</li>
<li>Invites are now retired correctly when rejecting an invite from a remote server which is no longer reachable</li>
<li>The DNS cache <code>cache_lifetime</code> option is now handled correctly (contributed by <a href="https://github.com/S7evinK">S7evinK</a>)</li>
<li>Invalid events in a room join response are now dropped correctly, rather than failing the entire join</li>
<li>The <code>prev_state</code> of an event will no longer be populated incorrectly to the state of the current event</li>
<li>Receiving an invite to an unsupported room version will now correctly return the <code>M_UNSUPPORTED_ROOM_VERSION</code> error code instead of <code>M_BAD_JSON</code> (contributed by <a href="https://github.com/meenal06">meenal06</a>)</li>
</ul>
<p>-- Team Dendrite</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;07&#x2F;21&#x2F;germany-s-national-healthcare-system-adopts-matrix&#x2F;" title="Germany’s national healthcare system adopts Matrix!">Germany’s national healthcare system adopts Matrix!</a></h2>
                <span>
                    21.07.2021 15:30
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>We’re incredibly excited to officially announce that the national agency for
the digitalisation of the healthcare system in Germany (<a href="http://gematik.de">gematik</a>)
has selected Matrix as the open standard on which to base all its
interoperable instant messaging standard - the TI-Messenger.</p>
<p>gematik has released a <a href="https://fachportal.gematik.de/anwendungen/ti-messenger">concept paper</a>
that explains the initiative in full.</p>
<h2 id="tl-dr">TL;DR</h2>
<p>With the TI-Messenger, gematik is creating a nationwide decentralised private
communication network - based on Matrix - to support potentially more than
<strong>150,000</strong> healthcare organisations within Germany’s national healthcare system.
It will provide end-to-end encrypted VoIP/Video and messaging for the whole
healthcare system, as well as the ability to share healthcare based data,
images and files.</p>
<p>Initially every healthcare provider (HCP) with an HBA (HPC ID card) will be
able to choose their own TI-Messenger provider. The homesever for HCP
accounts will be hosted by the provider’s datacentre. The homeserver for
institutions can be hosted by TI-Messenger providers, or on-premise.</p>
<p>Each organisation and individual will therefore retain complete ownership and
control of their communication data - while being able to share it securely
within the healthcare system with end-to-end encryption by default. All
servers in the Matrix-based private federation will be hosted within
Germany.</p>
<p>Needless to say, security is key when underpinning the entire nation’s
healthcare infrastructure and safeguarding sensitive patient data. As such,
the entire implementation will be <a href="https://www.bsi.bund.de/EN/Home/home_node.html">accredited by BSI</a>
(Federal Office for Information Security) and <a href="https://www.bfdi.bund.de/DE/Home/home_node.html">BfDI</a>
(Federal Commissioner for Data Protection and Freedom of Information).</p>
<h2 id="the-full-context">The full context...</h2>
<p>Germany’s digital care modernisation law (“Digitale Versorgung und Pflege
Modernisierungs Gesetz” or DVPMG), which came into force in June 2021, spells
out  the need for an instant messaging solution.</p>
<p>The urgency has increased by a significant rise in the use of instant
messaging and video conferencing within the healthcare system - for instance,
the amount of medical practices using messenger services doubled in 2020
compared to 2018 (much of this using insecure messaging solutions).</p>
<p><a href="https://www.gematik.de/">gematik</a>, majority-owned by Germany’s
<a href="https://www.bundesgesundheitsministerium.de/english-version.html">Federal Ministry of Health</a>,
is responsible for the standardised digital transformation of Germany’s
healthcare sector. It focuses on improving efficiency and introducing new
ways of working by setting, testing and certifying healthcare technology
including electronic health cards, electronic patient records and
e-prescriptions.</p>
<p><a href="https://www.gematik.de/anwendungen/ti-messenger/">TI-Messenger</a> is gematik’s
technical specification for an interoperable secure instant messaging
standard. The healthcare industry will be able to build a wide range of apps
based on TI-Messenger specifications knowing that, being built on Matrix, all
those apps will interoperate.</p>
<p>More than 150,000 organisations - ranging from local doctors to clinics,
hospitals, and insurance companies - can potentially standardise on instant
messaging thanks to gematik’s TI-Messenger initiative.</p>
<h2 id="the-road-to-interoperability">The road to interoperability</h2>
<p>By 1 October 2021, TI-Messenger will initially specify how communication
should work in practice between healthcare professionals (HCPs). Physicians
will be able to find and communicate with each other via TI-Messenger
approved apps - specifications include secure authentication mechanisms with
electronic health professional cards (eHBAs), electronic institution cards
(SMC-B) and a central <a href="https://hl7.org/FHIR/">FHIR</a> directory. The first
compliant apps for HCPs are expected to be licensed by Q2 2022.</p>
<p>Eric Grey (product manager for TI-Messenger at gematik), reckons there will
initially be around 10-15 TI-Messenger compliant Matrix-based apps for HCP
communications available from different vendors.</p>
<p>Healthcare professionals will be able to choose a TI-Messenger provider, who
will be hosting their personal accounts and provide the messenger-client.</p>
<p>Healthcare organisations will choose a TI-Messenger provider to build the
dedicated homeserver infrastructure (on prem or in a data center), provide
the client and ongoing support.</p>
<h2 id="what-does-this-mean-for-the-matrix-community">What does this mean for the Matrix community?</h2>
<p>Matrix is already integral to huge parts of the public sector; from the French
government’s Tchap platform, to Bundeswehr’s use of BwMessenger and adoption
by universities and schools across Europe.</p>
<p>Germany’s healthcare system standardising on Matrix takes this to entirely the
next level - and we can’t wait to see the rest of Europe (and the world!)
converge on Matrix for healthcare!</p>
<p>We'll have more info about TI-Messenger on this week's Matrix Live, out on
Friday - stay tuned!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;06&#x2F;30&#x2F;security-update-synapse-1-37-1-released&#x2F;" title="Security update: Synapse 1.37.1 released">Security update: Synapse 1.37.1 released</a></h2>
                <span>
                    30.06.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Over the last few days we've seen a distributed spam attack across the public Matrix network, where large numbers of spambots have been registered across servers with open registration and then used to flood abusive traffic into rooms such as Matrix HQ.</p>
<p>The spam itself has been handled by <a href="https://matrix.org/docs/guides/moderation#banning-servers">temporarily banning the abused servers</a>. However, on Monday and Tuesday the volume of traffic triggered performance problems for the homeservers participating in targeted rooms (e.g. memory explosions, or very delayed federation).  This was due to a combination of factors, but one of the most important ones was Synapse issue <a href="https://github.com/matrix-org/synapse/issues/9490">#9490</a>: that one busy room could cause head-of-line blocking, starving your server from processing events in other rooms, causing all traffic to fall behind.</p>
<p>We're happy to say that Synapse 1.37.1 <a href="https://github.com/matrix-org/synapse/pull/10272">fixes this</a> and we now process inbound federation traffic asynchronously, ensuring that one busy room won't impact others.  First impressions are that this has significantly improved federation performance and end-to-end encryption stability — for instance, new E2EE keys from remote users for a given conversation should arrive immediately rather than being blocked behind other traffic.</p>
<p><strong>Please upgrade to Synapse 1.37.1 as soon as possible, in order to increase resilience to any other traffic spikes.</strong></p>
<p><strong>Also, we highly recommend that you disable open registration or, if you keep it enabled, use SSO or require email validation to avoid abusive signups. Empirically adding a CAPTCHA is not enough. Otherwise you may find your server blocked all over the place if it is hosting spambots.</strong></p>
<p><strong>Finally, if your server has open registration, PLEASE check whether spambots have been registered on your server, and deactivate them.  Once deactivated, you will need to contact abuse@matrix.org to request that blocks on your server are removed</strong>.</p>
<p>Your best bet for spotting and neutralising dormant spambots is to review signups on your homeserver over the past 3-5 days and deactivate suspicious users. We do not recommend relying solely on lists of suspicious IP addresses for this task, as the distributed nature of the attack means any such list is likely to be incomplete or include shared proxies which may also catch legitimate users.</p>
<p>To ease review, we're working on an auditing script in <a href="https://github.com/matrix-org/synapse/pull/10290">#10290</a>; feedback on whether this is useful would be appreciated. Problematic accounts can then be dealt with using the <a href="https://matrix-org.github.io/synapse/v1.37/admin_api/user_admin_api.html#deactivate-account">Deactivate Account Admin API</a>.</p>
<p>Meanwhile, over to Dan for the Synapse 1.37 release notes.</p>
<h2 id="synapse-1-37-release-announcement">Synapse 1.37 Release Announcement</h2>
<p>Synapse 1.37 is now available!</p>
<blockquote>
<p>**Note: ** The legacy APIs for Spam Checker extension modules are now considered deprecated and targeted for removal in August. Please see <a href="https://matrix-org.github.io/synapse/v1.37/modules.html#porting-an-existing-module-that-uses-the-old-interface">the module docs</a> for information on updating.</p>
<p>This release also removes Synapse's built-in support for the obsolete ACMEv1 protocol for automatically obtaining TLS certificates. Server administrators should place Synapse behind a <a href="https://matrix-org.github.io/synapse/v1.37/reverse_proxy.html">reverse proxy</a> for TLS termination, or switch to a standalone ACMEv2 client like <a href="https://certbot.eff.org/">certbot</a>.</p>
</blockquote>
<h3 id="knock-knock">Knock, knock?</h3>
<p>After nearly 18 months and 129 commits, Synapse now includes support for <a href="https://github.com/matrix-org/matrix-doc/pull/2403">MSC2403: Add "knock" feature</a> and <a href="https://spec.matrix.org/unstable/rooms/v7/">Room Version 7</a>! This feature allows users to directly request admittance to private rooms, without having to track down an invitation out-of-band. One caveat: Though the server-side foundation is there, knocking is not <em>yet</em> implemented in clients.</p>
<h3 id="a-unified-interface-for-extension-modules">A Unified Interface for Extension Modules</h3>
<p>Third party modules can customize Synapse's behavior, implementing things like bespoke media storage providers or user event filters. However, Synapse previously lacked a unified means of enumerating and configuring third-party modules. That changes with Synapse 1.37, which introduces a new, <a href="https://matrix-org.github.io/synapse/v1.37/modules.html">generic interface for extensions</a>.</p>
<p>This new interface consolidates configuration into one place, allowing for more flexibility and granularity by explicitly registering callbacks with specific hooks. You can learn more about the new module API in the docs linked above, or in <a href="https://www.youtube.com/playlist?list=PLl5dnxRMP1hULbP8MYk2noPKFCFyg-SHK">Matrix Live</a> S6E29, due out this Friday, July 2nd.</p>
<h3 id="safer-reauthentication">Safer Reauthentication</h3>
<p>User-interactive authentication ("UIA") is required for potentially dangerous actions like removing devices or uploading cross-signing keys. However, Synapse can optionally be configured to provide a brief grace period such that users are not prompted to re-authenticate on actions taken shortly after logging in or otherwise authenticating.</p>
<p>This improves user experience, but also creates risks for clients which rely on UIA as a guard against actions like account deactivation. Synapse 1.37 protects users by exempting especially risky actions from the grace period. See <a href="https://github.com/matrix-org/synapse/pull/10184">#10184</a> for details.</p>
<h3 id="smaller-improvements">Smaller Improvements</h3>
<p>We've landed a number of smaller improvements which, together, make Synapse more responsive and reliable. We now:</p>
<ul>
<li>More efficiently respond to key requests, preventing excessive load (<a href="https://github.com/matrix-org/synapse/pull/10221">#10221</a>, <a href="https://github.com/matrix-org/synapse/pull/10144">#10144</a>)</li>
<li>Render docs for each <code>vX.Y</code> Synapse release, starting with v1.37 (<a href="https://github.com/matrix-org/synapse/pull/10198">#10198</a>)</li>
<li>Ensure that log entries from failures during early startup are not lost (<a href="https://github.com/matrix-org/synapse/pull/10191">#10191</a>)</li>
<li>Have a notion of database schema "compatibility versions", allowing for more graceful upgrades and downgrades of Synapse (<a href="https://matrix-org.github.io/synapse/v1.37/development/database_schema.html#synapse-schema-versions">docs</a>)</li>
</ul>
<p>We've also resolved two bugs which could cause sync requests to immediately return with empty payloads (<a href="https://github.com/matrix-org/synapse/issues/8518">#8518</a>), producing a tight loop of repeated network requests.</p>
<h3 id="everything-else">Everything Else</h3>
<p>Lastly, we've merged an experimental implementation of <a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716: Incrementally importing history into existing rooms</a> (<a href="https://github.com/matrix-org/synapse/pull/9247">#9247</a>) as part of Element's work to fully <a href="https://matrix.org/blog/2020/09/30/welcoming-gitter-to-matrix">integrate Gitter into Matrix</a>.</p>
<p>These are just the highlights; please see the <a href="https://github.com/matrix-org/synapse/blob/v1.37.1/UPGRADE.rst#upgrading-to-v1370">Upgrade Information</a> and <a href="https://github.com/matrix-org/synapse/blob/v1.37.1/CHANGES.md">Release Notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/aaronraimist">aaronraimist</a>, <a href="https://github.com/Bubu">Bubu</a>, <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/jkanefendt">jkanefendt</a>, <a href="https://github.com/lukaslihotzki">lukaslihotzki</a>, <a href="https://github.com/mikure">mikure</a>, and <a href="https://github.com/Sorunome">Sorunome</a>,</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&#x2F;" title="The Matrix Space Beta!">The Matrix Space Beta!</a></h2>
                <span>
                    17.05.2021 17:50
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 17.05.2021 17:35</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>As many know, over the years we've experimented with how to let users locate
and curate sets of users and rooms in Matrix. <a href="https://medium.com/@RiotChat/communities-aka-groups-are-here-announcing-riot-web-0-13-riot-ios-0-6-and-riot-android-0-7-4-933cb193a28e">Back in Nov
2017</a>
we added 'groups' (aka 'communities') as a custom mechanism for this -
introducing identifiers beginning with a + symbol to represent sets of rooms
and users, like <a href="https://matrix.to/#/+matrix:matrix.org">+matrix:matrix.org</a>.</p>
<p>However, it rapidly became obvious that Communities had some major
shortcomings.  They ended up being an extensive and entirely new API surface
(designed around letting you dynamically bridge the membership of a group
through to a single source of truth like LDAP) - while in practice groups
have enormous overlap with rooms: managing membership, inviting by email,
access control, power levels, names, topics, avatars, etc.  Meanwhile the
custom groups API re-invented the wheel for things like pushing updates
to the client (causing a whole suite of
<a href="https://github.com/vector-im/element-web/issues/5235">problems</a>).  So clients
and servers alike ended up reimplementing large chunks of similar
functionality for both rooms and groups.</p>
<p>And so almost before Communities were born, we started thinking about whether
it would make more sense to model them as a special type of room, rather than
being their own custom primitive.
<a href="https://github.com/matrix-org/matrix-doc/issues/1215">MSC1215</a> had the first
thoughts on this in 2017, and then a formal proposal emerged at
<a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> in Jan 2019. We
started working on this in earnest at the end of 2020, and christened the new
way of handling groups of rooms and users as... Spaces!</p>
<p>Spaces work as follows:</p>
<ul>
<li>You can designate specific rooms as 'spaces', which contain other rooms.</li>
<li>You can have a nested hierarchy of spaces.</li>
<li>You can rapidly navigate around that hierarchy using the new 'space summary'
(aka space-nav) API - <a href="https://github.com/matrix-org/matrix-doc/blob/kegan/spaces-summary/proposals/2946-spaces-summary.md">MSC2946</a>.</li>
<li>Spaces can be shared with other people publicly, or invite-only, or private
for your own curation purposes.</li>
<li>Rooms can appear in multiple places in the hierarchy.</li>
<li>You can have 'secret' spaces where you group your own personal rooms and
spaces into an existing hierarchy.</li>
</ul>
<p>Today, we're ridiculously excited to be launching Space support as a beta in
matrix-react-sdk and matrix-android-sdk2 (and thus Element Web/Desktop and
Element Android) and Synapse
<a href="https://matrix.org/blog/2021/05/17/synapse-1-34-0-released">1.34.0</a> - so head
over to your nearest Element, make sure it's connected to the latest Synapse
(and that Synapse has Spaces enabled in its config) and find some Space to
explore! <a href="https://matrix.to/#/#community:matrix.org">#community:matrix.org</a>
might be a good start :)</p>
<p>The beta today gives us the bare essentials: and we haven't yet finished
space-based access controls such as setting powerlevels in rooms based on
space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2962/proposals/2962-spaces-access-control.md">MSC2962</a>)
or limiting who can join a room based on their space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/clokep/restricted-rooms/proposals/3083-restricted-rooms.md">MSC3083</a>) -
but these will be coming asap.  We also need to figure out how to implement
Flair on top of Spaces rather than Communities.</p>
<p>This is also a bit of a turning point in Matrix's architecture: we are now
using rooms more and more as a generic way of modelling new features in
Matrix.  For instance, rooms could be used as a structured way of storing
files (<a href="https://github.com/matrix-org/matrix-doc/pull/3089">MSC3089</a>);
Reputation data
(<a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a>) is stored in
rooms; Threads can be stored in rooms
(<a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836</a>); Extensible
Profiles are proposed as rooms too
(<a href="https://github.com/matrix-org/matrix-doc/pull/1769">MSC1769</a>).  As such,
this pushes us towards ensuring rooms are as lightweight as possible in Matrix -
and that things like sync and changing profile scale independently of the
number of rooms you're in.  Spaces effectively gives us a way of creating a
global decentralised filesystem hierarchy on top of Matrix - grouping the
existing rooms of all flavours into an epic multiplayer tree of realtime data.
It's like USENET had a baby with the Web!</p>
<p>For lots more info from the Element perspective, head over to the <a href="https://element.io/blog/p/4ff44807-fe9a-4363-8521-9eab7efd4365/">Element
blog</a>.
Finally, the point of the beta is to gather feedback and fix bugs - so please
go wild in Element reporting your first impressions and help us make Spaces as
awesome as they deserve to be!</p>
<p>Thanks for flying Matrix into Space;</p>
<p>Matthew &amp; the whole Spaces (and Matrix) team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;02&#x2F;15&#x2F;how-we-hosted-fosdem-2021-on-matrix&#x2F;" title="How we hosted FOSDEM 2021 on Matrix">How we hosted FOSDEM 2021 on Matrix</a></h2>
                <span>
                    15.02.2021 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Just over a week ago we had the honour of using Matrix to host FOSDEM: the world's largest free &amp; open source software conference.  It's taken us a little while to write up the experience given we had to recover and catch up on business as usual... but better late than never, here's an overview of what it takes to run a ~30K attendee conference on Matrix!</p>
<p><img src="/blog/img/upload_5335e89b9ca474d844bdc37ea328967b.png" alt="" /><small><center><em>[confetti and firework easter-eggs explode over the closing keynote of FOSDEM 2021]</em></center></small></p>
<p>First of all, a quick (re)introduction to Matrix for any newcomers: Matrix is an open source project which defines an open standard protocol for decentralised communication.  The global Matrix network makes up at least 28M Matrix IDs spread over around 60K servers.  For FOSDEM, we set up a fosdem.org server to host newcomers, provided by <a href="https://ems.element.io">Element Matrix Services (EMS)</a> - <a href="https://element.io">Element</a> being the startup formed by the Matrix core team to help fund Matrix development.</p>
<p>The most unique thing about Matrix is that conversations get replicated across all servers whose users are present in the conversation, so there's never a single point of control or failure for a conversation (much as git repositories get replicated between all contributors).  And so hosting FOSDEM in Matrix meant that everyone already on Matrix (including users bridged to Matrix from IRC, XMPP, Slack, Discord etc) could attend directly - in addition to users signing up for the first time on the FOSDEM server.  Therefore the chat around FOSDEM 2021 now exists for posterity on all the Matrix servers whose users who participated; and we hope that the fosdem.org server will hang around for the benefit of all the newcomers for the foreseeable so they don't lose their accounts!</p>
<p>Talking of which: the vital stats of the weekend were as follows:</p>
<ul>
<li>We saw almost 30K local users on the FOSDEM server + 4K remote users from elsewhere in Matrix.</li>
<li>There were 24,826 guests (read-only invisible users) on the FOSDEM server.</li>
<li>There were 8,060 distinct users actively joined to the public FOSDEM rooms...</li>
<li>...of which 3,827 registered on the FOSDEM server.  (This is a bit of an eye-opener: over 50% of the actively participating attendees for FOSDEM were already on Matrix!)</li>
<li>These numbers don't count users who were viewing the livestreams directly, but only those who were attending via Matrix.</li>
</ul>
<p>Given last year's FOSDEM had roughly 8,500 in-person attendees at the Université libre de Bruxelles, this feels like a pretty good outcome :)</p>
<p>Graphwise, local user activity on the FOSDEM server looked like this:</p>
<p><img src="/blog/img/upload_e24e0febde0118ea9f2e93005d926d48.png" alt="" />
<img src="/blog/img/upload_63bad29ebc4d672d9979f9eea48fcfc5.png" alt="" /></p>
<h2 id="how-was-it-built">How was it built?</h2>
<p>There were four main components on the Matrix side:</p>
<ol>
<li>A horizontally-scalable Matrix server deployment (Synapse hosted in <a href="https://ems.element.io">EMS</a>)</li>
<li>A Jitsi cluster for the video conferencing, used to host all the Q&amp;A sessions, hallway sessions, stands, and other adhoc video conferences</li>
<li>An elastically scalable Jibri cluster used to livestream the Jitsi conferences both to the official FOSDEM livestreams and to provide a local preview of the conference on Matrix (to avoid the Jitsis getting overloaded with folks who just want to view)</li>
<li><a href="https://github.com/matrix-org/conference-bot">conference-bot</a> - a Matrix bot which orchestrated the overall conference on Matrix, written from scratch for FOSDEM by <a href="https://matrix.to/#/@travis:t2l.io">TravisR</a>, consuming the schedule from FOSDEM and maintaining all the necessary rooms with the correct permissions, widgets, invites, etc.</li>
</ol>
<p>Architecturally, it looked like this:</p>
<p><img src="/blog/img/upload_06b59bc2b2d518ffe616020e1fe5bee8.png" alt="" /></p>
<p>On the clientside, we made heavy use of widgets: the ability to embed arbitrary web content as iframes into Matrix chatrooms. (Widgets currently exist as a set of <a href="https://matrix.org/docs/spec/proposals">proposals</a> for the Matrix spec, which have been preemptively implemented in Element.)</p>
<p>For instance, the conference-bot created Matrix rooms for all the FOSDEM devrooms with a predefined widget for viewing the official FOSDEM livestream for that room, pointing at the appropriate HLS stream at stream.fosdem.org - which looked like this:</p>
<p><img src="/blog/img/upload_07145dc9cf8d5ae22b6eaf91a63dd8d6.jpg" alt="" /></p>
<p>Each devroom also had a schedule widget available on the righthand side, visualising the schedule of that room - huge thanks to Hato and Steffen and folks at <a href="https://nordeck.net/">Nordeck</a> for putting this together at the last minute; it enormously helped navigate the devrooms (and even had a live countdown to help you track where you were at in the schedule!)</p>
<p>Each devroom was also available via IRC on Freenode via a dedicated bridge (#fosdem-...) and via XMPP.</p>
<p>The bot also created rooms for each and every talk at FOSDEM (all 666 of them), as the space where the speaker and host could hang out in advance; watch the talk together, and then broadcast the Q&amp;A session.  At the end of the talk slot, the bot then transformed the talk room into a 'hallway' for the talk, and advertised it to the audience in the devroom, so folks could pose follow-on questions to the speaker as so often happens in real life at FOSDEM.  The speaker's view of the talk rooms looked like this:</p>
<p><img src="/blog/img/upload_f8b9121b21323955233d6633d19e3fb5.jpg" alt="" /></p>
<p>On the right-hand side you can see a "scoreboard" - a simple widget which tracked which messages in the devroom had been most upvoted, to help select questions for the Q&amp;A session.  On the left-hand side you can see a hybrid Jitsi/livestream widget used to coordinate between the speaker &amp; host.  By default, the widget showed the local livestream of the video call - if you clicked 'join conference' you'd join the Jitsi itself.  This stopped view-only users from overloading the Jitsi once the room became public.</p>
<p>The widgets themselves were hosted by the bot (you can see them at https://github.com/matrix-org/conference-bot/tree/main/web).  Meanwhile the chat.fosdem.org webclient itself ended up being identical to mainline Element Web 1.7.19, other than FOSDEM branding and being configured to hook the 'video call' button up to the hybrid Jitsi/livestream widget rather than a plain Jitsi.</p>
<p>Meanwhile, for conferencing we hosted an off-the-shelf Jitsi cluster sized to ~100 concurrent conferences, and for the Jibri livestreaming we set up an elastic scalable cluster using AWS Auto Scaling Groups.  Jibri is essentially a Chromium which views the Jitsi webapp, running in a headless X server whose framebuffer and ALSA audio is hooked up to an ffmpeg process which livestreams to the appropriate destination - so we chose to run a separate VM for every concurrent livestream to keep them isolated from each other.  The Jibri ffmpegs compressed the livestream to RTMP and relayed it to our nginx, which in turn relayed it to FOSDEM's livestreaming infrastructure for use in the official stream, as well as relaying it back to the local video preview in the Matrix livestream/video widget.</p>
<p>Here's a screengrab of the Jitsi/Jibri Grafana dashboard during the first day of the conference, showing 46 concurrent conferences in action, with 25 spare jibris in the scaling group cluster ready for action if needed :)</p>
<p><img src="/blog/img/upload_1dfb1ef630c0ac8f5b3fd81f52491964.png" alt="" /></p>
<p>There was also an explosion of changes to Element itself to try to make things go as smoothly as possible.  Probably the most important one was implementing Social Login - giving single-click registration for attendees who were happy to piggyback on existing identity providers (GitHub, GitLab, Google, Apple and Facebook) rather then signing up natively in Matrix:</p>
<p><img src="/blog/img/upload_45b228cf122b2faedfca5e36b6d52576.png" alt="" /></p>
<p>This was a real epic to get together (and is also an important part of <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">achieving parity</a> between Gitter and Element) - and seems to have been surprisingly successful for FOSDEM.  Almost 50% of users who signed up on the FOSDEM server did so via social login!  We should also be turning it on for the matrix.org server this week.</p>
<p>Finally, on the Matrix server side, we ran a cluster of synapse worker processes (1 federation inbound, reader and sender, 1 pusher, 1 initial sync worker, 10 synchrotrons, 1 event persister, 1 event creator, 4 general purpose client readers, 1 typing worker and 1 user directory) within Kubernetes on <a href="https://ems.element.io">EMS</a>.  These were hooked up for <a href="https://matrix.org/blog/2020/11/03/how-we-fixed-synapses-scalability/">horizontal scalability</a> as follows:</p>
<p><img src="/blog/img/upload_22b8ea14fff89c1bce93767b82ab1db5.png" alt="" /></p>
<p>The sort of traffic we saw (from day 2) looked like this:</p>
<p><img src="/blog/img/upload_42c22d9a51988d1bd28a17b814fd3859.png" alt="" />
<img src="/blog/img/upload_d2bd3f14d1ac53e5177152d48b8808e0.png" alt="" />
<img src="/blog/img/upload_08a75cf1588657a935d3801c3f346886.png" alt="" />
<img src="/blog/img/upload_5b7b327bbc4f633263daeaa6bbf54743.png" alt="" /></p>
<h2 id="how-did-it-go">How did it go?</h2>
<p>Overall, people seem to have had a good time.  Some folks have <a href="https://twitter.com/haerwu/status/1358731829512183813">even</a> been <a href="https://twitter.com/AxSaucedo/status/1358048849944797187">kind</a> enough to call it the <a href="https://twitter.com/cterboven/status/1358343020576440322">best</a> online event they've been to :)  This probably reflects the fact that FOSDEM rocks no matter what - and that Matrix is an inherently social medium, built by and for open source communities (after all, the whole Matrix ecosystem is developed over Matrix!).  Also, Matrix being an open network means that folks could join from all over, so the social dynamics already present in Matrix spilled over into FOSDEM - and we even saw a bunch of people spin up their own servers to participate; literally sharing the hosting responsibility themselves.  Finally, having critical infrastructure rooms available such as <a href="https://matrix.to/#/#beerevent:fosdem.org">#beerevent:fosdem.org</a>, <a href="https://matrix.to/#/#cafe:fosdem.org">#cafe:fosdem.org</a> and <a href="https://matrix.to/#/#food-trucks:fosdem.org">#food-trucks:fosdem.org</a> <a href="https://twitter.com/bortzmeyer/status/1358022989875466240">probably</a> helped as well.</p>
<p>That said, we did have some production incidents which impacted the event.  The most serious one was on Saturday morning, where it transpired that some of the endpoints hosted on the main Synapse process were taking way more CPU than we'd anticipated - most importantly the /groups endpoints which handle traffic relating to communities (the legacy way of defining groups of rooms in Matrix).  One of the last things we'd done to prepare for the conference on Friday night was to create a +fosdem:fosdem.org community which spanned all 1000 public rooms in the conference, as well as add the +staff:fosdem.org community to all of those rooms - and unfortunately we didn't anticipate how popular these would be.  As a result we had to do some emergency rebalancing of endpoints, spinning up new workers and reconfiguring the loadbalancer to relieve load off the main process.</p>
<p>Ironically the Matrix server was largely working okay during this timeframe, given event-sending no longer passes through the main process - but the most serious impact was that the conference bot was unable to boot due to hitting a wide range of endpoints on startup as it syncs with the conference, some of which were timing out.  This in turn impacted widgets, which had been hosted by the bot for convenience, meaning that the Jitsi conferences for stands and talk Q&amp;A were unavailable (even though the Jitsi/Jibri cluster was fine).  This was solved by lunchtime on Saturday: we are really sorry for folks whose Q&amp;As or conferences got caught in this.  On the plus side, we spotted that many affected rooms just added their own widgets for their own Jitsis or BBBs to continue with minimal distraction - effectively manually taking over from the bot.</p>
<p>The other main incident was briefly first thing on Sunday morning, where two Jibri livestreams ended up trying to broadcast video to the same RTMP URL (potentially due to a race when rapidly removing and re-adding the jitsi/livestream widget for one of the stands).  This caused a cascading failure which briefly impacted all RTMP streams, but was solved within about 30 minutes.  We also had a more minor problem with the active speaker recognition malfunctioning in Jitsi on Sunday (apparently a risk when using SCTP rather than Websockets as a transport within Jitsi) - this was solved around lunchtime.  Again, we're really sorry if you were impacted by this.  We've learned a lot from the experience, and if we end up doing this again we will make sure these failure modes don't repeat!</p>
<p>Other things we'd change if we have the chance to do it again include:</p>
<ul>
<li>Providing a to-the-second countdown via a widget in the talk room so the speaker &amp; host can see precisely when they're going 'live' in the devroom (and when precisely they're going to be cut in favour of the next talk)</li>
<li>Providing a scratch-pad of some kind in the talk room so the host &amp; speaker can track which questions they want to answer, and which they've already answered</li>
<li>Keep the questions scoreboard and scratchpad visible to the speaker/host after their Q&amp;A has finished so they can keep answering the questions in the per-talk room, and advertise the per-talk room more effectively.</li>
<li>Use Spaces rather than Communities to group the rooms together and automatically provide a structured room directory! (<a href="https://youtu.be/TzUfS08lMek?t=1609">Like this!</a>)</li>
<li>Use threads (once they land!) to help structure conversations in the devroom (perhaps these could even replace the hallway rooms?)</li>
<li>Make the schedule widgets easier to find, and have more of them around the place</li>
<li>Make room directory easier to find.</li>
<li>Give the option of recording the video in the per-talk and stands for posterity</li>
<li>Provide more tools to stands to help organise demos etc.</li>
</ul>
<p>So, there you have it.  We hope that this shows that it's possible to host successful large-scale conferences on Matrix using an <a href="https://sfconservancy.org/blog/2021/feb/08/just-say-no-to-zoom/">entirely open source stack</a>, and we hope that other events will be inspired to go online via Matrix!  We should give a big shout out to <a href="https://hope.net">HOPE</a>, who independently trailblazed running conferences on Matrix last year and <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">inspired us</a> to make FOSDEM work.</p>
<p>If you want to know more, we also did a talk about FOSDEM-on-Matrix in this month's <a href="https://youtu.be/Wp2rSyqZsbs?t=4903">Open Tech Will Save Us</a> meetup and the <a href="https://www.youtube.com/watch?v=TzUfS08lMek">Building Massive Virtual Communities on Matrix</a> talk at FOSDEM went into more detail too.  Our historical <a href="https://matrix.org/blog/2021/01/04/taking-fosdem-online-via-matrix">Taking FOSDEM online via Matrix</a> blog has been somewhat overtaken by events but gives further context still.</p>
<p>Finally, huge thanks to FOSDEM for letting Matrix host the social side of the conference.  This was a big bet, starting from scratch with our <a href="https://twitter.com/matrixdotorg/status/1301285515774373889">offer to help</a> back in September, and we hope it paid off.  Also, thanks to all the folks at Element who bust a gut to pull it together - and to the FOSDEM organisers, who were a real pleasure to work with.</p>
<p>Let's hope that FOSDEM 2022 will be back in person at ULB - but whatever happens, the infrastructure we built this year will be available if ever needed in future.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;01&#x2F;04&#x2F;taking-fosdem-online-via-matrix&#x2F;" title="Taking FOSDEM online via Matrix">Taking FOSDEM online via Matrix</a></h2>
                <span>
                    04.01.2021 12:25
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <div style="text-align: center; padding-bottom: 1em">
<a href="https://fosdem.org">
    <img src="/blog/img/2021-01-04-fosdem.jpg" alt="FOSDEM" width="480"/>
</a>
</div>
<p>Imagine you could physically step into your favourite FOSS projects’ chatrooms, mailing lists or forums and talk in person to other community members, contributors or committers?  Imagine you could see project leads show off their latest work in front of a packed audience, and then chat and brainstorm with them afterwards (and maybe grab a beer)?  Imagine, as a developer, you could suddenly meet a random subset of your users, to hear and understand their joys and woes in person?</p>
<p>This is <a href="https://fosdem.org">FOSDEM</a>, Europe’s largest Free and Open Source conference, where every year thousands of people (last year, ~8,500) take over the Solbosch campus of the Université Libre de Bruxelles in Belgium for a weekend and turn it into both a cathedral and bazaar for FOSS, with over 800+ talks organised over 50+ tracks, hundreds of exhibitor stands, and the whole campus generally exploding into a physical manifestation of the Internet.  The event is completely non-commercial and volunteer run, and is a truly unique and powerful (if slightly overwhelming!) experience to attend.  Ever since we began Matrix in 2014, FOSDEM has been <a href="https://matrix.org/blog/2020/02/03/matrix-at-fosdem-2020">the</a> <a href="https://matrix.org/blog/2019/02/04/matrix-at-fosdem-2019">focal</a> <a href="https://matrix.org/blog/2018/02/05/3-d-video-calling-with-matrix-webrtc-and-webvr-at-fosdem-2018">point</a> <a href="https://matrix.org/blog/2017/02/06/fosdem-2017-report">of</a> <a href="https://matrix.org/blog/2016/02/03/fosdem-16-retrospective">our</a> <a href="https://matrix.org/blog/2015/02/04/back-from-fosdem">year</a> as we’ve rushed to demonstrate our latest work and catch up with the wider community and sync with other projects.</p>
<p>This year, things are of course different.  Thankfully FOSDEM 2020 snuck in a few weeks before the COVID-19 pandemic went viral, but for FOSDEM 2021 on Feb 6/7th the conference will inevitably happen online.  When this was announced <a href="https://twitter.com/fosdem/status/1301167254705303554">a few months back</a>, we reached out to FOSDEM to see if we could help: we’d just had a lot of fun helping <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">HOPE go online</a>, and meanwhile a lot of the work that’s gone into Matrix and Element in 2020 has been around large-scale community collaboration due to COVID - particularly thanks to all the development driven by Element’s <a href="https://sifted.eu/articles/element-germany-deal/">German Education</a> work.  Meanwhile, we obviously love FOSDEM and want it to succeed as much as possible online - and we want to attempt to solve the impossible paradox of faithfully capturing the atmosphere and community of an event which is “online communities, but in person!”... but online.</p>
<p>And so, over the last few weeks we’ve been hard at work with the FOSDEM team to figure out how to make this happen, and we wanted to give an update on how things are shaping up (and to hopefully reassure folks that things are on track, and that devrooms don’t need to make their own plans!).</p>
<p>Firstly, FOSDEM will have its own dedicated Matrix server at fosdem.org (hosted by <a href="https://element.io/matrix-services">EMS</a> along with a tonne of Jitsi’s) acting as the social backbone for the event.  Matrix is particularly well suited for this, because:</p>
<ul>
<li>We’re an <a href="https://matrix.org/docs/spec">open standard</a> comms protocol with an open network run under a <a href="https://matrix.org/foundation">non-profit foundation</a> with loads of <a href="https://matrix.org/docs/projects/try-matrix-now/">open source implementations</a> (including the reference ones): folks can jump on board and participate via their own servers, clients, bridges, bots etc.</li>
<li>We provide official bridges through to IRC and XMPP (and most other chat systems), giving as much openness and choice as possible - if folks want to participate via Freenode and XMPP they can!</li>
<li>We’re built with large virtual communities in mind (e.g. Mozilla, KDE, Matrix itself) - for instance, we’ve worked a lot on <a href="https://matrix.org/docs/guides/moderation">moderation</a> recently.</li>
<li>We’ve spent a lot of time improving <a href="https://youtu.be/Fk7YRiFIwZ4?t=251">widgets</a> recently: these give the ability to embed arbitrary webapps into chatrooms - letting you add livestreams, video conferences, schedules, Q&amp;A dashboards etc, augmenting a plain old chatroom into a much richer virtual experience that can hopefully capture the semantics and requirements of an event like FOSDEM.</li>
</ul>
<p>We’re currently in the middle of setting up the server with a dedicated <a href="https://element.io">Element</a> as the default client, but what we’re aiming for is:</p>
<ul>
<li>Attendees can lurk as read-only guests in devrooms without needing to set up accounts (or they can of course use their existing Matrix/IRC/XMPP accounts)</li>
<li>Every devroom and track will have its own chatroom, where the audience can hang out and view the livestream of that particular devroom (using the normal FOSDEM video livestream system).  There’ll also be a ‘backstage’ room per track for coordination between the devroom organisers and the speakers.</li>
<li>The talks themselves will be prerecorded to minimise risk of disaster, but each talk will have a question &amp; answer session at the end which will be a live Jitsi broadcast from the speaker and a host who will relay questions from the devroom.</li>
<li>Each talk will have a dedicated room too, where after the official talk slot the audience can pop in and chat to the speaker more informally if they’re available (by text and/or by moderated jitsi).  During the talk, this room will act as the ‘stage’ for the speaker &amp; host to watch the livestream and conduct the question &amp; answer session.</li>
<li>Every stand will also have its own chatroom and optional jitsi+livestream, as will BOFs or other adhoc events, so folks can get involved both by chat and video, to get as close to the real event as possible (although it’s unlikely we’ll capture the unique atmospheric conditions of K building, which may or may not be a bug ;)</li>
<li>There’ll also be a set of official support, social etc rooms - and of course folks can always create their own!  Unfortunately folks will have to bring their own beer though :(</li>
<li>All of this will be orchestrated by a Matrix bot (which is rapidly taking shape over at <a href="https://github.com/matrix-org/conference-bot">https://github.com/matrix-org/conference-bot</a>), responsible for orchestrating the hundreds of required rooms, setting up the right widgets and permissions, setting up bridges to IRC &amp; XMPP, and keeping everything in sync with the official live <a href="https://fosdem.org/2021/schedule/xml">FOSDEM schedule</a>.</li>
</ul>
<p><strong>N.B. This is aspirational, and is all still subject to change</strong>, but that said - so far it’s all coming together pretty well, and hopefully our next update will be opening up the rooms and the server so that folks can get comfortable in advance of the event.</p>
<p>Huge thanks go to the FOSDEM team for trusting us to sort out the social/chat layer of FOSDEM 2021 - we will do everything we can to make it as successful and as inclusive as we possibly can! :)</p>
<h2 id="p-s-we-need-help">P.S. We need help!</h2>
<p>FOSDEM is only a handful of weeks away, and we have our work cut out to bring this all together in time.  There are a few areas where we could really do with some help:</p>
<ul>
<li>Folks on XMPP often complain that the <a href="https://github.com/matrix-org/matrix-bifrost">Bifröst</a> Matrix&lt;-&gt;XMPP bridge <a href="https://github.com/matrix-org/matrix-bifrost/issues/64">doesn’t support MAMs</a> - meaning that if XMPP users lose connection, they lose scrollback.  We’re not going to have time to fix this ourselves in time, so this would be a great time for XMPP folks who grok xmpp.js to come get involved and help to ensure the best possible XMPP experience!  (Similarly on other bifrost shortcomings).</li>
<li>It’d be really nice to be able to render nice schedule widgets for each devroom, and embed the overall schedule in the support rooms etc.  The current HTML schedules at <a href="https://fosdem.org/2021/schedule/day/saturday/">https://fosdem.org/2021/schedule/day/saturday/</a> and (say) <a href="https://fosdem.org/2021/schedule/room/vcollab/">https://fosdem.org/2021/schedule/room/vcollab/</a> don’t exactly fit - if someone could write a thing which renders them at (say) 2:5 aspect ratio so they can fit nicely down the side of a chatroom then that could be awesome!</li>
<li>While we’ll bridge all the official rooms over to Freenode, it’d be even nicer if people could just hop straight into <em>any</em> room on the FOSDEM server (or beyond) via IRC - effectively exposing the whole thing as an IRC network for those who prefer IRC.  We have a project to do this: <a href="https://github.com/matrix-org/matrix-ircd">matrix-ircd</a>, but it almost certainly needs more love and polish before it could be used for something as big as this.  If you like Rust and know Matrix, please jump in and get involved!</li>
<li>If you just want to follow along or help out, then we’ve created a general room for discussion over at <a href="https://matrix.to/#/#fosdem-matrix:fosdem.org">#fosdem-matrix:fosdem.org</a>.  It’d be awesome to have as many useful bots &amp; widgets as possible to help things along.</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2020&#x2F;12&#x2F;25&#x2F;the-matrix-holiday-special-2020&#x2F;" title="The Matrix Holiday Special 2020">The Matrix Holiday Special 2020</a></h2>
                <span>
                    25.12.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Over the years it’s become a tradition to write an end-of-year wrap-up on Christmas Eve, reviewing all the things the core Matrix team has been up over the year, and looking forwards to the next (e.g. here’s <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update">last year’s edition</a>).  These days there’s so much going on in Matrix it’s impossible to cover it all (and besides, we now have <a href="https://matrix.org/blog/category/this-week-in-matrix">This Week In Matrix</a> and better blogging in general to cover events as they happen).  So here’s a quick overview of the highlights:</p>
<p>Looking back at our <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update#2020">plans for 2020</a> in last year’s wrap-up, amazingly it seems we pretty much achieved what we set out to do.  Going through the bulletpoints in order:</p>
<ul>
<li>We <a href="https://matrix.org/blog/2020/05/06/cross-signing-and-end-to-end-encryption-by-default-is-here">turned on End-to-end Encryption by default</a>.</li>
<li>We have a dedicated team making major improvements to First-Time User Experience in Element (as of the last few months; hopefully you’ve been noticing the improvements!)</li>
<li><a href="https://element.io/blog/welcome-to-element/">RiotX became Element Android and shipped</a>.</li>
<li>Communities have been completely reinvented as <a href="https://youtu.be/_Ade0FZfnWo?t=39">Spaces</a> (<a href="https://github.com/matrix-org/matrix-doc/commits/matthew/msc1772/proposals/1772-groups-as-rooms.md">MSC1772</a>) and while in alpha currently, they should ship in Jan.</li>
<li><a href="https://matrix.org/blog/2020/11/03/how-we-fixed-synapses-scalability">Synapse scalability is fixed</a>: we now shard horizontally by event - and Synapse is now pretty much <a href="https://patrick.cloke.us/areweasyncyet/">entirely async/await</a>!</li>
<li><a href="https://matrix.org/blog/2020/10/08/dendrite-is-entering-beta/">Dendrite Beta shipped</a>, as did the <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix/">initial P2P Matrix experiments</a>, which have subsequently continued to evolve significantly (although we haven’t implemented <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a> or <a href="https://github.com/matrix-org/matrix-doc/blob/neilalexander/identities/proposals/2787-portable-identities.md">MSC2787</a> portable accounts yet). Check out the <a href="https://matrix.org/blog/2020/12/15/dendrite-2020-progress-update">Dendrite end-of-year update</a> for more.</li>
<li><a href="https://youtu.be/_Ade0FZfnWo?t=939">MLS experiments are in full swing</a> - we got the first MLS messages passing over Matrix a few days ago, and Decentralised MLS work is back on the menu after an initial sprint in May.</li>
<li>There’s been a valiant mission to improve Bridge UX in the form of <a href="https://github.com/matrix-org/matrix-doc/pull/2346">MSC2346</a> and its implementations in Element Web, although this has ended up failing to get to the top of the todo list (sorry Half-Shot! :/)</li>
<li>Spec progress has improved somewhat, and we are very excited to have welcomed Will Bamberg (formerly MDN) to support the spec from a professional tech writer perspective, with <a href="https://friendly-yonath-3de225.netlify.app/">the all-new engine</a> landing any day now! We’re still experimenting with ways to ensure the spec gets enough time allocated to keep up with the backlog, however - particularly community contributions.</li>
<li>...and in terms of Abuse/Reputation - we properly <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">kicked off our anti-abuse work</a> and launched a first PoC implementation in the depths of <a href="https://matrix.org/blog/2020/12/18/introducing-cerulean#whats-with-the-decentralised-reputation-button">Cerulean</a> last week.</li>
</ul>
<p>Perhaps more interesting is the stuff we didn’t predict (or at least didn’t want to pre-announce ;) for 2020:</p>
<ul>
<li>Riot, Modular and New Vector got unified at last behind a single name: <a href="https://element.io/blog/welcome-to-element/">Element</a>; hopefully the shock has worn off by now :)</li>
<li><a href="https://matrix.org/blog/2020/03/03/moznet-irc-is-dead-long-live-mozilla-matrix">Mozilla joined Matrix</a> in force, turning off Moznet IRC in favour of going full Matrix.</li>
<li><a href="https://matrix.org/blog/2020/09/30/welcoming-gitter-to-matrix">We welcomed Gitter</a> into the heart of the Matrix ecosystem (with <a href="https://element.io/blog/gitter-is-joining-element/">Element acquiring Gitter</a> from <a href="https://about.gitlab.com/blog/2020/09/30/gitter-moves-to-element/">Gitlab</a> in order to ensure Gitter’s Matrix integration acts as a reference for integrating future chat silos into Matrix) - with <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">native Matrix support in Gitter</a> going live shortly afterwards.</li>
<li><a href="https://matrix.org/blog/2020/05/21/welcoming-automattic-to-matrix">Automattic</a> launched itself into the Matrix ecosystem with an investment in Element, and since then we’ve been working on getting Matrix better integrated and available to them (although all of Element’s Matrix-for-governments activity has ended up delaying this a bit).  If you want to work for Automattic on integrating Matrix, <a href="https://automattic.com/work-with-us/matrix-integrations-engineer/">they’re hiring</a>!</li>
<li>We previewed <a href="https://matrix.org/blog/2020/12/18/introducing-cerulean">Cerulean</a> as a super-exciting proof-of-concept client, demonstrating how social media could work on Matrix, with native threading, profiles-as-rooms, decentralised reputation, and (shortly) peeking-over-federation.</li>
<li><a href="https://matrix.org/blog/2020/12/17/matrix-to-reloaded">We completely rewrote matrix.to</a> and relaunched it as a much more capable and friendly permalink redirection service; a precursor to finally getting matrix:// URLs everywhere!</li>
<li>We certainly didn’t predict that the “<a href="https://matrix.org/blog/2020/04/06/running-your-own-secure-communication-service-with-matrix-and-jitsi">how to install Synapse</a>” video tutorial published at the beginning of the COVID-19 pandemic would end up with 25.5K views (and counting…)</li>
</ul>
<p>Then, there’s whole new waves of exciting stuff going on.  The most obvious has to be the amount of Government uptake we’ve seen with Matrix this year, following on from <a href="https://joinup.ec.europa.eu/collection/open-source-observatory-osor/document/french-government-launches-house-developed-messaging-service-tchap">France embracing Matrix</a> across the public sector last year.  Firstly the German armed forces announced their <a href="https://www.bwi.de/news-blog/news/artikel/open-source-matrix-ist-einheitlicher-messenger-standard-fuer-die-bundeswehr">transition to Matrix</a>, and then the German states of Schleswig-Holstein and Hamburg announced a <a href="https://sifted.eu/articles/element-germany-deal/">mammoth 500K user Matrix deployment</a> for education and public administration.  Meanwhile, North Rhine Westphalia (the biggest state in Germany) launched their own Matrix-powered <a href="https://www.logineo.schulministerium.nrw.de/LOGINEO-NRW/NEU-LOGINEO-NRW-Messenger/Messenger.html">messager for education</a>; loads of different universities have rolled out Matrix for collaboration  - and we hear <a href="https://famedly.com">Famedly</a> is <a href="https://www.businessinsider.de/gruenderszene/health/famedly-kommunikation-app-gesundheitswesen/">making good progress</a> with Matrix-powered healthcare messaging solutions.  Finally, outside of Germany, we’re seeing the first official deployments in the UK government and US federal government - we’ll share details where possible (but sometimes big deployments of encrypted communication systems want to remain discreet).  It’s incredibly exciting to see Matrix spreading across the public sector and education, and we’re hoping this will follow a similar pattern to how the Internet, email or indeed the Web first developed: a mix of high profile public sector deployments, complemented by a passionate grass-roots technical community, eventually spreading to span the rest of society :).</p>
<p>Another exciting thing which emerged this year is the amazing academic work that Karlsruhe Institute of Technology’s <a href="https://dsn.tm.kit.edu/english/">Decentralized Systems and Network Services Research Group</a> has been conducting on Matrix.  This really came on the radar back in June when their <a href="https://matrix.org/blog/2020/06/16/matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</a> paper was published - a truly fascinating analysis of how state resolution works in Matrix, and how we manage to preserve access control within rooms without using blockchain-style ‘sealed blocks’ (and has helped fix a few nasty bugs!).  I’m not sure any of us realised that Matrix’s state resolution counts as a new field of research, but it’s been great to follow along with their independent work.  Most recently, and even more excitingly, they’re circulating a preview of their <a href="https://arxiv.org/abs/2011.06488">Analysis of the Matrix Event Graph Replicated Data Type</a> paper - a deep analysis of the properties of Matrix DAGs themselves.  We highly recommend reading the papers (what better way to spend the holiday break!).  To give a taste, the final paragraph of the paper concludes:</p>
<p><a href="https://arxiv.org/abs/2011.06488"><img src="https://matrix.org/blog/img/2020-12-25-meg-summary.png" alt="MEG summary" /></a></p>
<p>2020 has also seen the arrival and maturation of a whole new generation of Matrix clients - <a href="https://hydrogen.element.io">Hydrogen</a> is <em>really</em> impressive as an experimental next-generation Web (and Mobile Web) client; an account with 3000 rooms that uses 1.4GB of RAM on Element Web uses 14MB of RAM on Hydrogen and launches instantly, complete with excellent E2EE implementation.  It even works on MSIE!  The whole app, including dependencies, is about 70KB of code (200KB including Olm).  Meanwhile, <a href="https://github.com/matrix-org/matrix-rust-sdk">matrix-rust-sdk</a> is coming along well, providing a general purpose native library for writing excellent native Matrix clients.  Fractal merged initial matrix-rust-sdk a few weeks ago, and we’ll be experimenting with switching to it in Element iOS and Element Android (for its e2ee) in the coming year.  It’s not inconceivable to think of a world where matrix-rust-sdk ends up being the no-brainer official SDK for native apps, and Hydrogen’s SDK becomes the no-brainer official SDK for JS apps.</p>
<p>Meanwhile, in the community, there’s been so much activity it’s untrue.  But on the subject of maturing apps, it’s been incredibly exciting to see <a href="https://invent.kde.org/network/neochat">NeoChat</a> emerge as an official KDE Matrix client (built on <a href="https://github.com/quotient-im/libQuotient">libQuotient</a> and <a href="https://develop.kde.org/frameworks/kirigami">Kirigami</a>, forked from <a href="https://gitlab.com/spectral-im/spectral">Spectral</a>), <a href="https://gitlab.com/famedly/fluffychat">FluffyChat</a> going from strength to strength; <a href="https://nheko.im/nheko-reborn/nheko">Nheko</a> continuing to mature impressively; <a href="https://github.com/mirukana/mirage">Mirage</a> appearing out of nowhere as a fully featured desktop client; <a href="https://gitlab.gnome.org/GNOME/fractal">Fractal</a> merging matrix-rust-sdk etc.  On the serverside, <a href="http://conduit.rs/">Conduit</a> was the big community story of the year - with an incredibly fast Rust + Sled server appearing out of the blue, with viable federation coming up on the horizon.  The best bet for an overview of all things community is to checkout the <a href="https://matrix.org/blog/category/this-week-in-matrix">TWIM backlogs</a> however - there’s simply way too much stuff to mention it all here.</p>
<p>Obviously, no 2020 wrap-up post would be complete without acknowledging the COVID-19 pandemic - which increased focus on Matrix and other remote collaboration technology more than anyone could have predicted (especially given all the privacy missteps from Zoom, Teams and others).  One of the highlights of the year was seeing the HOPE (Hackers On Planet Earth) conference shift <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">their entire proceedings over to Matrix</a> - turning the conference into a 10 day television station of premium hacking content, with Matrix successfully providing the social glue to preserve a sense of community despite going virtual.  Similarly, we’re incredibly excited that FOSDEM 2021 is highly likely to run primarily via Matrix (with bridges to IRC and XMPP, of course) - our work is going to be cut out for us in January to ensure the amazing atmosphere of FOSDEM is preserved online for the &gt;8,500 participants and ~800 talks.  And if any other event organisers are reading this - please do reach out if you’re interested in going online via Matrix: we want Matrix to be the best possible ecosystem for online communities, including virtual events, and we’ll be happy to help :)</p>
<p>Talking of FOSDEM, a really fun bit of work which landed in Element this year was to (finally!) polish Widgets: the ability to embed arbitrary webapps into Matrix chatrooms.  This includes being able to embed widgets in the RightPanel on Element Web, the LeftPanel too, add as many as you like to a room, resize them(!), and generally build much more sophisticated dashboards of additional content.  Modal and fullscreen widgets are coming too, as are ways to simplify and unify access control.  It turns out that these have arrived in the nick of time for events like FOSDEM, where we’re expecting to very heavily use widgets to embed video streams, video conferences, schedules, and generally automate the workflow of the conference via adding in web UIs as widgets wherever necessary.  The work for this has been driven by the various German education deployments, where the same tricks are invaluable for automating online learning experiences.  We originally wrote Widgets back in 2017 as a proof-of-concept to try to illustrate how chatrooms could be used to host proper custom UIs, and it's fantastic to see that dream finally come of age.</p>
<p>Finally, it’s been really exciting to see major progress in recent months on what’s essentially a whole new evolution of Matrix.  Two years ago, a quiet patch during the Christmas holidays gave birth to a whole bunch of wild science fiction Matrix Spec Changes: <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a>: Spaces (groups as rooms), <a href="https://github.com/matrix-org/matrix-doc/pull/1769">MSC1769</a>: Profiles as rooms, <a href="https://github.com/matrix-org/matrix-doc/pull/1767">MSC1767</a>: Extensible events, <a href="https://github.com/matrix-org/matrix-doc/pull/1776">MSC1776</a>: Peeking over /sync, <a href="https://github.com/matrix-org/matrix-doc/pull/1777">MSC1777</a>: Peeking over federation, etc.  This was in part trying to ensure that we had something to look forward to when we emerged from the tunnel of launching Matrix 1.0, and in part trying to draw a coherent high-level sketch of what the next big wave of Matrix features could look like.  Inevitably the MSCs got stuck in limbo for ages while we exited beta, launched Matrix 1.0, turned on E2EE by default etc - but in the latter half of this year they’ve hit the top of the todo list and it’s been incredibly exciting to see entirely new features landing once again.  Implementation for Spaces is in in full swing and <a href="https://youtu.be/_Ade0FZfnWo?t=39">looking great</a>; Profiles-as-rooms are effectively being trialled in Cerulean; Peeking over /sync has landed in Dendrite and peeking over federation is in PR (and unlocks all sorts of desirable features for using rooms more generically than we have today, including Spaces).  Only Extensible events remains in limbo for now (we have enough to handle getting the others landed!)</p>
<p>Of these, Spaces has turned out to be exciting in wholly unexpected ways.  While prototyping the UX for how best to navigate hierarchies of spaces, we had a genuine epiphany: the ability for anyone to define and share arbitrary hierarchies of rooms makes Matrix effectively a global decentralised hierarchical file system (where the ‘files’ are streams of realtime data, but can obviously store static content too).  The decentralised access controls that KIT DSN <a href="https://matrix.org/blog/2020/06/16/matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution">wrote about</a> could <em>literally</em> be file-system style access controls; enforcing access on a global decentralised hierarchy.  We obviously have shared hierarchical filesystems today thanks to Dropbox and Google Drive, but these of course are centralised and effectively only store files - whereas Spaces could potentially scale to the whole web.  In fact, you could even think of Spaces as flipping Matrix entirely on its head: the most defining building block going forwards could be the Spaces themselves rather than the rooms and events - just as directories are intrinsic to how you navigate a conventional filesystem.  How has Matrix got this far without the concept of folders/directories?!</p>
<p>Right now these thoughts are just overexcited science fiction, but the potential really is mindblowing.  It could give us a global read/write web for organising any arbitrary realtime data - with the social controls via ACLs to delegate and crowdsource curation of hierarchies however folks choose.  The Matrix.org Foundation could seed a ‘root’ hierarchy, go curate all the rooms we know about into some Linnean-style taxonomy, delegate curation of the various subspaces to moderators from the community, and hey presto we’ve reinvented USENET… but with modern semantics, and without the rigid governance models.  Hell, we could just mount (i.e. bridge) USENET straight into it.  And any other hierarchical namespace of conversations you can think of - Google Groups, Stackoverflow, Discourse, IMAP trees…</p>
<p>Of course, the initial Spaces implementation is going to be focused of on letting communities publish their existing rooms, and users organise their own rooms, rather than managing an infinite ever-expanding global space hierarchy - but given we’ve been designing Spaces to support government (and inter-government) scales of Spaces, it’s not inconceivable to think we could use it to navigate gigantic public shared Spaces in the longer term.</p>
<p>Anyway, enough Space scifi - what’s coming up in 2021?</p>
<h2 id="2021">2021</h2>
<p>Our current hit list is:</p>
<ul>
<li><strong>Spaces</strong> - see above :)</li>
<li><strong>Social Login</strong> - we’re going to be making Single Sign On (SSO) a proper first-class citizen in Matrix (and Synapse and Element) in the coming weeks, and enabling it on the matrix.org homeserver, so users can do single-click logins via Github/Gitlab/Google and other SSO providers.  Obviously this means your Matrix identity will be beholden to your identity provider (IdP), but this may well be preferable for many users who just want a single-click way to enter Matrix and don’t care about being tied to a given IdP.</li>
<li><strong>VoIP</strong> - we have a <em>lot</em> of work in flight at the moment to make 1:1 VoIP super robust.  Some of it has already landed in Element, but the rest will land in the coming weeks - and then we’re hoping to revisit Matrix-native group voice/video.</li>
<li><strong>Voice messaging</strong> - we’re hoping to finally add voice messaging to Element (and Matrix)</li>
<li><strong>Location sharing</strong> - ...and this too.</li>
<li>**P2P **- Lots of P2P work on the horizon, now Dendrite is increasingly stable.  First of all we need to iterate more on Pinecone, our pre-alpha next-generation P2P overlay network - and then sort out account portability, and privacy-preserving store-and-forward.  We’re hoping to see the live P2P Matrix network turn on this year, however, and ideally see homeservers (probably Dendrite) multihoming by default on both today’s Matrix as well as the P2P network, acting as gateways between the two.</li>
<li><strong>Threads</strong> - Cerulean is excellent proof for how threading could work in Matrix; we just need to get it implemented in Element!</li>
<li><strong>Peeking</strong> - Peeking is going to become so much more important for participating in non-chat rooms, such as Spaces, Profiles, Reputation feeds, etc.  We’ll finish it in Dendrite, and then implement it in Synapse too.</li>
<li>**Decentralised Reputation **- Cerulean has the first implementation of decentralised reputation for experimentation purposes, and we’ll be working solidly on it over the coming year to empower users to counter abuse by applying their own subjective reputation feeds to their content.</li>
<li>**Incremental Signup **- Once upon a time, Element (Riot) had the ability to gradually sign-up without the user even really realising they’d signed up.  We want to bring it back - perhaps this will be the year?</li>
<li><strong>DMLS</strong> - with the first <a href="https://datatracker.ietf.org/wg/mls">MLS</a> messages flowing over Matrix, we want to at least provide MLS as an option alongside Megolm for encryption.  It should be radically more performant in larger rooms (logarithmic rather than linear complexity), but lacks deniability (the assurance that you cannot prove a user said something in retrospect, in order to blackmail them or similar), and is still unproven technology.  We’ll aim to prove it in 2021.</li>
<li><strong>E2EE improvements</strong> - We improved E2EE immeasurably in 2020; turning it on by default, adding cross-signing, QR code verification etc.  But usability and reliability can still be improved.  We’ll be looking at further simplifying the UX, and potentially combining together your login password and recovery/security passphrase so you only have one password to remember going forwards.</li>
<li><strong>Hydrogen</strong> - We’ll keep polishing Hydrogen, bringing it towards feature parity with Element, ensure its SDK is available for other clients, and start seeing how we can use it in Element itself.  For instance, the Spaces-aware RoomList in Element may well end up stealing alien technology from Hydrogen.</li>
<li><strong>matrix-rust-sdk</strong> - Similarly, we’ll keep polishing matrix-rust-sdk; stealing inspiration from Hydrogen’s state model, and start migrating bits of the native mobile Element apps to use it.</li>
<li><strong>The Spec</strong> - get Will’s new spec website live, and get improving all the surrounding material too.</li>
</ul>
<p>I’m sure I’m missing lots here, but these are the ones which pop immediately to mind.  You can also check <a href="https://github.com/vector-im/roadmap/projects/1">Element's public roadmap</a>, which covers all the core Matrix work donated by Element (as well as everything else Element is getting up to).</p>
<p>As always, huge huge thanks goes to the whole Matrix community for flying Matrix and keeping the dream alive and growing faster than ever.  It’s been a rough year, and we hope that you’ve survived it intact (and you have our sincere sympathies if you haven’t).  Let’s hope that 2021 will be a massive improvement, and that the whole Matrix ecosystem will continue to prosper in the new year.</p>
<p>-- Matthew, Amandine, and the whole Matrix team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2020&#x2F;12&#x2F;18&#x2F;introducing-cerulean&#x2F;" title="Introducing Cerulean">Introducing Cerulean</a></h2>
                <span>
                    18.12.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We have a bit of an unexpected early Christmas present for you today…</p>
<p>Alongside all the normal business-as-usual Matrix stuff, we’ve found some time to do a mad science experiment over the last few weeks - to test the question: “Is it possible to build a serious Twitter-style decentralised microblogging app using Matrix?”</p>
<p>It turns out the answer is a firm “yes” - and as a result we’d like to present a <strong>very</strong> early sneak preview of <a href="https://cerulean.matrix.org">Cerulean</a>: a highly experimental new microblogging app for Matrix, complete with first-class support for arbitrarily nested threading, with both Twitter-style (“vertical”) and HN/Reddit-style (“horizontal”) layout… and mobile web support!</p>
<p><a href="https://cerulean.matrix.org/@kegan:dendrite.matrix.org/!bHe21S4P3axekSRD:dendrite.matrix.org/$0QE6vqMZiS9169Y-3C84dkQui-1G5uG2eGFsYzPrhx8"><img src="https://matrix.org/blog/img/2020-12-18-cerulean-screenshot.jpg" alt="Cerulean screenie" /></a></p>
<p>Cerulean is unusual in many ways:</p>
<ul>
<li>It’s (currently) <a href="https://github.com/matrix-org/cerulean">a very minimal javascript app</a> - only 2,500 lines of code.</li>
<li>It has zero dependencies (other than React).
<ul>
<li>This is to show just how simple a fairly sophisticated Matrix client can be...</li>
<li>...and so the code can be easily understood by folks unfamiliar with Matrix...</li>
<li>...and so we can iterate fast while figuring out threading...</li>
<li>...and because none of the SDKs support threading yet :D</li>
</ul>
</li>
<li>It relies on <a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836: Threading</a> - our highly experimental Matrix Spec Change to extend relationships (as used by reaction &amp; edit aggregations) to support free-form arbitrary depth threading.</li>
<li>As such, <strong>it only works on Dendrite</strong>, as that’s where we’ve been experimenting with implementing MSC2836.  (We’re now running an <a href="https://matrix.org/blog/2020/12/15/dendrite-2020-progress-update">official public Dendrite server instance</a> at dendrite.matrix.org though, which makes it easy to test - and our test Cerulean instance <a href="https://cerulean.matrix.org">https://cerulean.matrix.org</a> points at it by default).</li>
</ul>
<p>This is **very much a proof of concept.  **We’re releasing it today as a sneak preview so that intrepid Matrix experimenters can play with it, and to open up the project for contributions! (PRs welcome - it should be dead easy to hack on!).  Also, we give no guarantees about data durability: both Cerulean and dendrite.matrix.org are highly experimental; do not trust them yet with important data; we reserve the right to delete it all while we iterate on the design.</p>
<h3 id="what-can-it-do">What can it do?</h3>
<p>So for the first cut, we’ve implemented the minimal features to make this something you can just about use and play with for real :)</p>
<ul>
<li>Home view (showing recent posts from folks you follow)</li>
<li>Timeline view (showing the recent posts or replies from a given user)</li>
<li>Thread view (showing a post and its replies as a thread)</li>
<li>Live updating (It’s Matrix, after all! We’ve disabled it for guests though.)</li>
<li>Posting plain text and images</li>
<li>Fully decentralised thanks to Matrix (assuming you’re on Dendrite)</li>
<li>Twitter-style “Vertical” threading (replies form a column; you indent when someone forks the conversation)</li>
<li>HN/Reddit/Email-style “Horizontal” threading (each reply is indented; forks have the same indentation)</li>
<li>Basic Registration &amp; Login</li>
<li>Guest support (slightly faked with non-guest users, as Dendrite’s guest support isn’t finished yet)</li>
<li>Super-experimental proof-of-concept support for <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">decentralised reputation filtering</a>(!)</li>
</ul>
<p>Obviously, there’s a huge amount of stuff needed for parity with a proper Twitter-style system:</p>
<ul>
<li>Configurable follows.  Currently the act of viewing someone’s timeline automatically follows them.  This is because Dendrite doesn’t peek over federation yet (but <a href="https://github.com/matrix-org/dendrite/pull/1391">it’s close</a>), so you have to join a room to view its contents - and the act of viewing someone’s timeline room is how you follow them in Cerulean.</li>
<li>Likes (i.e. plain old Matrix reactions, although we might need to finally sort out federating them as aggregations rather than individually, if people use them like they use them on Twitter!)</li>
<li>Retweets (dead easy)</li>
<li>Pagination / infinite scrolling (just need to hook it up)</li>
<li>Protect your posts (dead easy; you just switch your timeline room to invite-only!)</li>
<li>Show (some) replies to messages in the Home view</li>
<li>Show parent and sibling context as well as child context in the Thread view</li>
<li>Mentions (we need to decide how to notify folks when they’re mentioned - perhaps Matrix’s push notifications should be extended to let you subscribe to keywords for public rooms you’re not actually in?)</li>
<li>Notifications (although this is just because Dendrite doesn’t do notifs yet)</li>
<li>Search (again, just needs to be implemented in Dendrite - although how do you search beyond the data in your current homeserver? Folks are used to global search)</li>
<li>Hashtags (it’s just search, basically)</li>
<li>Symlinks (see below)</li>
<li>Figure out how to handle lost unthreaded messages (see below)</li>
<li>Offline support? (if we were using a proper Matrix SDK, we’d hopefully get this for free, but currently Cerulean doesn’t store any state locally at all).</li>
</ul>
<h3 id="how-does-it-work">How does it work?</h3>
<p>Every message you send using Cerulean goes into two Matrix rooms, dubbed the "timeline" room and the "thread" room. The "timeline" room (with an alias of <a href="https://matrix.to/#/#@matthew:dendrite.matrix.org">#@matthew:dendrite.matrix.org</a> or whatever your matrix id is) is a room with all of your posts and no one else's. The "thread" room is a normal Matrix room which represents the message thread itself. Creating a new "Post" will create a new "thread" room. Replying to a post will join the existing "thread" room and send a message into that room. MSC2836 is used to handle threading of messages in the "thread” room - the replies refer to their parent via an m.relationship field in the event.</p>
<p>These semantics play nicely with existing Matrix clients, who will see one room per thread and a flattened chronological view of the thread itself (unless the client natively supports MSC2836, but none do yet apart from Cerulean). However, as Cerulean only navigates threaded messages with an m.reference relationship (eg it only ever uses the new /event_relationships API rather than /messages to pull in history), <strong>normal messages sent by Matrix into a thread or timeline room will not yet show up in Cerulean.</strong></p>
<p>In this initial version, Cerulean literally posts the message twice into both rooms - but we’re also experimenting with the idea of adding “symlinks” to Matrix, letting the canonical version of the event be in the timeline room, and then the instance of the event in the thread room be a ‘symlink’ to the one in the timeline.  This means that the threading metadata could be structured in the thread room, and let the user do things like turn their timeline private (or vice versa) without impacting the threading metadata.  We could also add an API to both post to timeline and symlink into a thread in one fell swoop, rather than manually sending two events.  It’d look something like this:</p>
<p><img src="https://matrix.org/blog/img/2020-12-18-cerulean-diagram.png" alt="Cerulean diagram" /></p>
<p>We also experimented with cross-room threading (letting Bob’s timeline messages directly respond to Alice’s timeline messages and vice versa), but it posed some nasty problems - for instance, to find out what cross-room replies a message has, you’d need to store forward references somehow which the replier would need permission to create.  Also, if you didn’t have access to view the remote room, the thread would break. So we’ve punted cross-room threading to a later MSC for now.</p>
<p>Needless to say, once we’re happy with how threading works at the protocol level, we’ll be looking at getting it into the UX of Element and mainstream Matrix chat clients too!</p>
<h3 id="what-s-with-the-decentralised-reputation-button">What’s with the decentralised reputation button?</h3>
<p>Cerulean is very much a test jig for new ideas (e.g. threading, timeline rooms, peeking), and we’re taking the opportunity to also use it as an experiment for our first forays into publishing and subscribing to reputation greylists; giving users the option to filter out content by default they might not want to see… but doing so on their own terms by subscribing to whatever reputation feed they prefer, while clearly visualising the filtering being applied.  In other words, this is the first concrete experimental implementation of the work proposed in the second half of <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">Combating Abuse in Matrix without Backdoors</a>.  This is super early days, and we haven’t even published a proto-MSC for the event format being used, but if you’re particularly interested in this domain it’s easy enough to figure out - just head over to <a href="https://matrix.to/#/#nsfw:dendrite.matrix.org">#nsfw:dendrite.matrix.org</a> (warning: not actually NSFW, yet) and look in /devtools to see what’s going on.</p>
<p>So, there you have it - further evidence that Matrix is not just for Chat, and a hopefully intriguing taste of the shape of things to come! Please check out the demo at <a href="https://cerulean.matrix.org">https://cerulean.matrix.org</a> or try playing with your own from <a href="https://github.com/matrix-org/cerulean">https://github.com/matrix-org/cerulean</a>, and then head over to <a href="https://matrix.to/#/#cerulean:matrix.org">#cerulean:matrix.org</a> and let us know what you think! :)</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;matthew-hodgson&#x2F;page&#x2F;2&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">3 / 16</span>
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;matthew-hodgson&#x2F;page&#x2F;4&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;support">Donate</a>
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org">Shop</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org" rel="me"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;" rel="me"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix" rel="me"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg" rel="me"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w" rel="me"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
            <a href="&#x2F;atom.xml" rel="me"><img src="/assets/rss.svg" alt="RSS"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
