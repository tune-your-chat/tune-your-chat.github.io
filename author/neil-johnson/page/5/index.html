<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />
    
    <meta property="og:url" content="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;neil-johnson&#x2F;page&#x2F;5&#x2F;" />
    
    
    
    
    <meta property="og:title" content="Matrix.org" />
    
    
    
    <meta property="og:description" content="Matrix, the open protocol for secure decentralised communications" />
    <meta name="description" content="Matrix, the open protocol for secure decentralised communications" />
    
    <meta property="og:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    <meta name="twitter:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    
    <title>Matrix.org - Neil Johnson</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href=https://tune-your-chat.github.io/style.css?h=0d1a23c06b707a231261 />
    <script async src=https://tune-your-chat.github.io/js/components.js?h=ae3cb894d00e16ef08be></script>
    <script defer data-domain="matrix.org" src="https://plausible.io/js/script.tagged-events.js"></script>


    
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://tune-your-chat.github.io/author/neil-johnson/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="https:&#x2F;&#x2F;spec.matrix.org" class="
            ">
            Spec
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="foundation-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="foundation-submenu-checkbox" class="submenu-title">Foundation <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;foundation&#x2F;about&#x2F;">About Matrix</a>
                    
                    <a href="&#x2F;foundation&#x2F;governing-board-elections&#x2F;">Governing Board Elections 2024</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Docs
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;tune&#x2F;">Tune Your Chat</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;support" class="
            ">
            Donate
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Neil Johnson</h1>
            67 posts tagged with "Neil Johnson" <a href="/author">(See all Author)</a>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;03&#x2F;04&#x2F;synapse-0-99-2-released&#x2F;" title="Synapse 0.99.2 released!">Synapse 0.99.2 released!</a></h2>
                <span>
                    04.03.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Well now, what have we here? Synapse 0.99.2 is the latest in the 0.99.x series as we step ever closer to 1.0.</p>
<p>0.99.2 is an incremental release including a bunch of performance improvements, enhancements to room upgrades and generally a plethora of bug fixes.</p>
<p>The most important thing that admins should know is that prior to 1.0 landing later this month, <strong>it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.</strong> For more details see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">handy guide</a>. Failure to do this will result in being unable to federate with other 1.0 servers.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.2">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<h2 id="synapse-0-99-2-changelog">Synapse 0.99.2 changelog</h2>
<h3 id="features">Features</h3>
<ul>
 	<li>Added an HAProxy example in the reverse proxy documentation. Contributed by Benoît S. (“Benpro”). (<a href="https://github.com/matrix-org/synapse/issues/4541" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4541/hovercard">#4541</a>)</li>
 	<li>Add basic optional sentry integration. (<a href="https://github.com/matrix-org/synapse/issues/4632" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4632/hovercard">#4632</a>, <a href="https://github.com/matrix-org/synapse/issues/4694" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4694/hovercard">#4694</a>)</li>
 	<li>Transfer bans on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4642" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4642/hovercard">#4642</a>)</li>
 	<li>Add configurable room list publishing rules. (<a href="https://github.com/matrix-org/synapse/issues/4647" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4647/hovercard">#4647</a>)</li>
 	<li>Support .well-known delegation when issuing certificates through ACME. (<a href="https://github.com/matrix-org/synapse/issues/4652" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4652/hovercard">#4652</a>)</li>
 	<li>Allow registration and login to be handled by a worker instance. (<a href="https://github.com/matrix-org/synapse/issues/4666" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4666/hovercard">#4666</a>, <a href="https://github.com/matrix-org/synapse/issues/4670" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4670/hovercard">#4670</a>, <a href="https://github.com/matrix-org/synapse/issues/4682" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4682/hovercard">#4682</a>)</li>
 	<li>Reduce the overhead of creating outbound federation connections over TLS by caching the TLS client options. (<a href="https://github.com/matrix-org/synapse/issues/4674" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4674/hovercard">#4674</a>)</li>
 	<li>Add prometheus metrics for number of outgoing EDUs, by type. (<a href="https://github.com/matrix-org/synapse/issues/4695" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4695/hovercard">#4695</a>)</li>
 	<li>Return correct error code when inviting a remote user to a room whose homeserver does not support the room version. (<a href="https://github.com/matrix-org/synapse/issues/4721" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4721/hovercard">#4721</a>)</li>
 	<li>Prevent showing rooms to other servers that were set to not federate. (<a href="https://github.com/matrix-org/synapse/issues/4746" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4746/hovercard">#4746</a>)</li>
</ul>
<h3 id="bugfixes">Bugfixes</h3>
<ul>
 	<li>Fix possible exception when paginating. (<a href="https://github.com/matrix-org/synapse/issues/4263" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4263/hovercard">#4263</a>)</li>
 	<li>The dependency checker now correctly reports a version mismatch for optional
dependencies, instead of reporting the dependency missing. (<a href="https://github.com/matrix-org/synapse/issues/4450" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4450/hovercard">#4450</a>)</li>
 	<li>Set CORS headers on .well-known requests. (<a href="https://github.com/matrix-org/synapse/issues/4651" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4651/hovercard">#4651</a>)</li>
 	<li>Fix kicking guest users on guest access revocation in worker mode. (<a href="https://github.com/matrix-org/synapse/issues/4667" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4667/hovercard">#4667</a>)</li>
 	<li>Fix an issue in the database migration script where the
<code>e2e_room_keys.is_verified</code> column wasn't considered as
a boolean. (<a href="https://github.com/matrix-org/synapse/issues/4680" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4680/hovercard">#4680</a>)</li>
 	<li>Fix TaskStopped exceptions in logs when outbound requests time out. (<a href="https://github.com/matrix-org/synapse/issues/4690" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4690/hovercard">#4690</a>)</li>
 	<li>Fix ACME config for python 2. (<a href="https://github.com/matrix-org/synapse/issues/4717" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4717/hovercard">#4717</a>)</li>
 	<li>Fix paginating over federation persisting incorrect state. (<a href="https://github.com/matrix-org/synapse/issues/4718" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4718/hovercard">#4718</a>)</li>
</ul>
<h3 id="internal-changes">Internal Changes</h3>
<ul>
 	<li>Run <code>black</code> to reformat user directory code. (<a href="https://github.com/matrix-org/synapse/issues/4635" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4635/hovercard">#4635</a>)</li>
 	<li>Reduce number of exceptions we log. (<a href="https://github.com/matrix-org/synapse/issues/4643" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4643/hovercard">#4643</a>, <a href="https://github.com/matrix-org/synapse/issues/4668" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4668/hovercard">#4668</a>)</li>
 	<li>Introduce upsert batching functionality in the database layer. (<a href="https://github.com/matrix-org/synapse/issues/4644" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4644/hovercard">#4644</a>)</li>
 	<li>Fix various spelling mistakes. (<a href="https://github.com/matrix-org/synapse/issues/4657" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4657/hovercard">#4657</a>)</li>
 	<li>Cleanup request exception logging. (<a href="https://github.com/matrix-org/synapse/issues/4669" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4669/hovercard">#4669</a>, <a href="https://github.com/matrix-org/synapse/issues/4737" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4737/hovercard">#4737</a>, <a href="https://github.com/matrix-org/synapse/issues/4738" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4738/hovercard">#4738</a>)</li>
 	<li>Improve replication performance by reducing cache invalidation traffic. (<a href="https://github.com/matrix-org/synapse/issues/4671" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4671/hovercard">#4671</a>, <a href="https://github.com/matrix-org/synapse/issues/4715" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4715/hovercard">#4715</a>, <a href="https://github.com/matrix-org/synapse/issues/4748" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4748/hovercard">#4748</a>)</li>
 	<li>Test against Postgres 9.5 as well as 9.4. (<a href="https://github.com/matrix-org/synapse/issues/4676" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4676/hovercard">#4676</a>)</li>
 	<li>Run unit tests against python 3.7. (<a href="https://github.com/matrix-org/synapse/issues/4677" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4677/hovercard">#4677</a>)</li>
 	<li>Attempt to clarify installation instructions/config. (<a href="https://github.com/matrix-org/synapse/issues/4681" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4681/hovercard">#4681</a>)</li>
 	<li>Clean up gitignores. (<a href="https://github.com/matrix-org/synapse/issues/4688" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4688/hovercard">#4688</a>)</li>
 	<li>Minor tweaks to acme docs. (<a href="https://github.com/matrix-org/synapse/issues/4689" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4689/hovercard">#4689</a>)</li>
 	<li>Improve the logging in the pusher process. (<a href="https://github.com/matrix-org/synapse/issues/4691" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4691/hovercard">#4691</a>)</li>
 	<li>Better checks on newsfragments. (<a href="https://github.com/matrix-org/synapse/issues/4698" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4698/hovercard">#4698</a>, <a href="https://github.com/matrix-org/synapse/issues/4750" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4750/hovercard">#4750</a>)</li>
 	<li>Avoid some redundant work when processing read receipts. (<a href="https://github.com/matrix-org/synapse/issues/4706" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4706/hovercard">#4706</a>)</li>
 	<li>Run <code>push_receipts_to_remotes</code> as background job. (<a href="https://github.com/matrix-org/synapse/issues/4707" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4707/hovercard">#4707</a>)</li>
 	<li>Add prometheus metrics for number of badge update pushes. (<a href="https://github.com/matrix-org/synapse/issues/4709" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4709/hovercard">#4709</a>)</li>
 	<li>Reduce pusher logging on startup (<a href="https://github.com/matrix-org/synapse/issues/4716" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4716/hovercard">#4716</a>)</li>
 	<li>Don't log exceptions when failing to fetch remote server keys. (<a href="https://github.com/matrix-org/synapse/issues/4722" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4722/hovercard">#4722</a>)</li>
 	<li>Correctly proxy exception in frontend_proxy worker. (<a href="https://github.com/matrix-org/synapse/issues/4723" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4723/hovercard">#4723</a>)</li>
 	<li>Add database version to phonehome stats. (<a href="https://github.com/matrix-org/synapse/issues/4753" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4753/hovercard">#4753</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;03&#x2F;01&#x2F;this-week-in-matrix-2019-03-01&#x2F;" title="This Week in Matrix 2019-03-01">This Week in Matrix 2019-03-01</a></h2>
                <span>
                    01.03.2019 00:00
                    —
                    <a href="/category/this-week-in-matrix">
                        This Week in Matrix
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>No Ben this week, <em>apparently</em> he is allowed to go on holiday from time to time. Also no Matrix Live because we are terrible people - bring back Ben, that's what I say.</p>
<h2 id="quaternion">Quaternion</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org" rel="nofollow">kitsune</a>:</p>
<blockquote>
<p><a href="https://github.com/QMatrixClient/Quaternion">Quaternion</a> (master branch, and upcoming v0.0.9.4) can now open rooms by their aliases or ids upon pressing Ctrl+O, as long as those rooms are already in your room list (opening arbitrary public rooms will come in later versions). You can even paste matrix.to URIs for users (will open direct chat) and rooms in the same dialog. Navigation to known rooms inside Quaternion also works.</p>
<p>libQMatrixClient 0.5 is out - with members lazy-loading, room versions and upgrades and much more: <a class="linkified" href="https://github.com/QMatrixClient/libqmatrixclient/releases/tag/0.5.0" target="_blank" rel="noopener">https://github.com/QMatrixClient/libqmatrixclient/releases/tag/0.5.0</a></p>
</blockquote>
<p>Which is, err, pretty amazing actually. As far as I know this is the <span class="mx_EventTile_body" dir="auto">only independent SDK supporting lazy loading and room upgrades. Congratulations.</span></p>
<h2 id="weechat-matrix">weechat-matrix</h2>
<p><a href="https://matrix.to/#/@poljar:matrix.org">Poljar</a> has been hard at work on <a href="/docs/projects/client/weechat.html">weechat-matrix</a></p>
<p>Matthew reports:-</p>
<blockquote>
<p>weechat-matrix's e2e support is really impressive (via matrix-nio and python-olm). It can only read rather than send right now, but otherwise looks to be massively on the right track. It even does fingerprint-based verification!</p>
</blockquote>
<p><a href="https://github.com/benparsons/matrix-notes/blob/master/twim/weechat-matrix.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/benparsons/matrix-notes/raw/master/twim/weechat-matrix.png" alt="" /></a></p>
<h2 id="synapse">Synapse</h2>
<p>We shipped <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.2">0.99.2</a> this week, it's a point release containing all the usual bug fixes and perf improvements. We have also been taking a look at our docs and trying to improve where we can.</p>
<p>Hawkowl has spent some time improving CI so that we don't get queued up for hours waiting for builds (woo).</p>
<p>Admins - your weekly reminder that if you've not already done so, <strong>you must ensure the TLS certificate on your federation endpoints is no longer self signed</strong> - <a href="https://github.com/matrix-org/synapse/blob/v0.99.2/docs/MSC1711_certificates_FAQ.md">see our handy guide for all the details</a>.</p>
<h2 id="matrix-puppet-bridge">matrix-puppet-bridge</h2>
<p><a href="https://matrix.to/#/@root:thomasprofitt.com" rel="nofollow">tom</a>:</p>
<blockquote>
<p><a href="https://github.com/matrix-hacks/matrix-puppet-bridge/releases">matrix-puppet-bridge v1.17.0</a> has been released! This release:</p>
</blockquote>
<blockquote>
<ul>
 	<li>Handles m.notice messages sent from Matrix as text, instead of ignoring them (thanks go to <a href="https://matrix.to/#/@cdknight1:matrix.org" rel="nofollow">https://matrix.to/#/@cdknight1:matrix.org</a> !)</li>
 	<li>Sets rooms invite-only when they're touched, instead of relying on others not knowing the room ID (thanks to <a href="https://matrix.to/#/@AndrewJDR:matrix.org" rel="nofollow">https://matrix.to/#/@AndrewJDR:matrix.org</a> , from all of us who federate on the homeservers we use to bridge!)</li>
</ul>
</blockquote>
<blockquote>
<p>Matrix rooms representing remote rooms being joinable by anyone who knows the room ID (which is generated, at least in part, from the remote room ID in all the matrix-puppet-bridge applications) was a big deficiency, and it's finally resolved. It wasn't known whether or not we could do this, and have our ghost users still be able to join the rooms (they need to be invited instead of just joining themselves), until it was attempted and tested in a few of the bridge applications.<br />Because it <em>is</em> a big deal, new minor versions of <a href="https://github.com/matrix-hacks/matrix-puppet-slack/releases">matrix-puppet-slack</a>, <a href="https://github.com/matrix-hacks/matrix-puppet-facebook/releases">matrix-puppet-facebook</a>, <a href="https://github.com/matrix-hacks/matrix-puppet-hangouts/releases">matrix-puppet-hangouts</a>, <a href="https://github.com/matrix-hacks/matrix-puppet-signal">matrix-puppet-signal</a>, <a href="https://github.com/matrix-hacks/matrix-puppet-imessage">matrix-puppet-imessage</a> and <a href="https://github.com/matrix-hacks/matrix-puppet-groupme/releases/tag/v1.1.0">matrix-puppet-groupme</a>, bumping the matrix-puppet-bridge version to 1.17.0, have been released.</p>
</blockquote>
<h2 id="riot-ios">Riot iOS</h2>
<blockquote>
<ul>
 	<li style="font-weight: 400;">Support .well-known data from login response
</li>
 	<li style="font-weight: 400;">Create right permalinks for room v3
</li>
 	<li style="font-weight: 400;">Fix builder to Xcode 10.1 in order to still be able to release
</li>
 	<li style="font-weight: 400;">Update swift version. Add swiftLint
</li>
</ul>
</blockquote>
<h2 id="matrix-media-repo">matrix-media-repo</h2>
<p><a href="https://github.com/turt2live">TravisR</a> reports that:</p>
<blockquote>
<p><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> has alpha-quality support for s3 (and s3-like services) on the travis/s3 branch. Intrepid testers are encouraged to give it a shot, and report bugs. Caution: may upload your cat.</p>
</blockquote>
<h2 id="scylla">Scylla</h2>
<p>It's been a little while since we saw any news about <a href="https://github.com/DanilaFe/Scylla">Scylla</a>, a web-based client written in Elm. <a href="https://matrix.to/#/@daniel:riot.danilafe.com" rel="nofollow">VaNilLa</a> said:</p>
<blockquote>
<p>Scylla, the Elm-based Matrix client, has received a few improvements. Included in this update:</p>
<ul>
 	<li>Files that are uploaded now keep their original name (as opposed to being called File)</li>
 	<li>Sent messages are displayed right away, instead of when they are delivered to the server</li>
 	<li>Usernames are only shown once per several consecutive messages, to avoid clutter Some CSS changes have been made to keep the interface looking clean</li>
</ul>
Almost forgot! You can find <a href="https://github.com/DanilaFe/Scylla">Scylla's source code here</a> and a <a href="http://scylla.danilafe.com/" rel="nofollow">live instance here</a>!
</blockquote>
<p><a href="https://github.com/benparsons/matrix-notes/blob/master/twim/Scylla.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/benparsons/matrix-notes/raw/master/twim/Scylla.png" alt="" /></a></p>
<h2 id="riot-android">Riot Android</h2>
<blockquote>
<ul>
 	<li style="font-weight: 400;">Implementation of .well-known support (SDK and Riot)
</li>
 	<li style="font-weight: 400;">Minor change on some colors of the themes (link, home badges)
</li>
 	<li style="font-weight: 400;">Many issue will be fixed regarding linkification
</li>
 	<li style="font-weight: 400;">KeysBackup: improvement on recovery process: importing keys step is 8 times faster, and user get more feedback during the process which can take several seconds
</li>
 	<li style="font-weight: 400;">We will prepare a new release for the beginning of next week.
</li>
 	<li style="font-weight: 400;">PlayStore new descriptions have been updated for the following languages: Bulgarian, German, English (US), French, Hungarian, Russian and Chinese (Taiwan).
</li>
</ul>
</blockquote>
<h3 id="riotx-android">RiotX (Android)</h3>
<blockquote>
<ul>
<li>Timeline:
<ul>
<li>HTML formatting</li>
<li>Implementation of pills (need optimization)</li>
</ul>
</li>
<li>Many Github issues have been created to track parity with the Riot Android</li>
</ul>
</blockquote>
<h2 id="riotic-new-fork-with-updates">Riotic: new fork with updates</h2>
<p><a href="https://matrix.to/#/@aaron:raim.ist" rel="nofollow">Aaron Raimist</a> has made some updates to Riotic, which was a good chance for me to revisit it. It works nicely and is a great alternative to the Electron version of Riot. I also like being able to use <a href="https://riot.im/develop" rel="nofollow">https://riot.im/develop</a> as an app.</p>
<blockquote>
<p>I've slightly tweaked Joakim Ahlen's Riot wrapper for macOS, riotic, which uses the native WKWebView instead of Electron. I updated the app to be sandboxed so it has very limited access to your system. I also updated the interface to follow macOS conventions and updated it to use the latest version of Swift.</p>
<p>riotic does have some limitations though. Riot doesn't support VoIP on Safari so riotic can't support VoIP either and WKWebView doesn't support notifications as far as I can tell. Right now it uses a really old Riot icon, maybe I'll ask about using one of these community made icons <a href="https://github.com/vector-im/riot-web/pull/4474">https://github.com/vector-im/riot-web/pull/4474</a>.</p>
<p>It does have some advantages over the official Riot Electron app though. The app is only ~12 MB compared to Riot which is ~180 MB, it also uses significantly less RAM. riotic also allows you to pick what Riot URL to use so you can run /develop as a desktop app.</p>
<p>You can download riotic from <a href="https://github.com/aaronraimist/riotic/releases/tag/v1.1">https://github.com/aaronraimist/riotic/releases/tag/v1.1</a>.</p>
</blockquote>
<p><a href="https://github.com/benparsons/matrix-notes/blob/master/twim/riotic1.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/benparsons/matrix-notes/raw/master/twim/riotic1.png" alt="" /></a><a href="https://github.com/benparsons/matrix-notes/blob/master/twim/riotic2.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/benparsons/matrix-notes/raw/master/twim/riotic2.png" alt="" /></a> <a href="https://github.com/benparsons/matrix-notes/blob/master/twim/riotic3.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/benparsons/matrix-notes/raw/master/twim/riotic3.png" alt="" /></a></p>
<h2 id="synapse-netcore-workers">synapse-netcore-workers</h2>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk" rel="nofollow">Half-Shot</a> has been working on <a href="https://github.com/turt2live/synapse-netcore-workers">synapse-netcore-workers</a>:</p>
<blockquote>
<p>The synapse-netcore-worker project has continued to evolve. You can now federate with other servers using the federation sender implementation. It supports everything except device lists at the moment, so it supports PDUs/EDUs and can just be connected up to one of your existing synapse instances. It's not been battletested enough yet to be put in production (hence no dockerfile), but it's very fast.<br />Oh and for those of you who don't know, "synapse-netcore-worker" is Travis's .NET implementation of synapse workers, the room can be found at <a href="https://matrix.to/#/#synapse-netcore-workers:t2bot.io" rel="nofollow">#synapse-netcore-workers:t2bot.io</a>.</p>
</blockquote>
<p>If you're as uninitiated as I was three days ago, this project is a replaceable worker component for Synapse, which just happens to be written in .NET.</p>
<p>But wait, there's more! <a href="https://matrix.to/#/@Half-Shot:half-shot.uk" rel="nofollow">Half-Shot</a> continues with</p>
<blockquote>
<p>To give an update to the earlier exploits of synapse-netcore-worker's federation sender, we've still got a few more things to iron out before we can suggest people use it actively. The hit list of remaining things to fix is in <a class="linkified" href="https://github.com/turt2live/synapse-netcore-workers/pull/5" target="_blank" rel="noopener">https://github.com/turt2live/synapse-netcore-workers/pull/5</a></p>
</blockquote>
<h2 id="mautrix-whatsapp">Mautrix Whatsapp</h2>
<p>That <a href="https://matrix.to/#/@benpa:matrix.org">Ben</a> guy eh? When he's not swanning off on holiday and having fun, he's writing super groovy guides to getting whatsapp bridging up and running. You don't even need a real device. <a href="/docs/guides/whatsapp-bridging-mautrix-whatsapp">Check it out.</a></p>
<h2 id="ruby-sdk">Ruby SDK</h2>
<p><a class="mx_Pill mx_UserPill" title="@ace:kittenface.studio" data-reactroot=""><img class="mx_BaseAvatar mx_BaseAvatar_image" title="@ace:kittenface.studio" src="/_matrix/media/v1/thumbnail/kittenface.studio/fClzyKoJrPjBdSsoVYGglwqL?width=16&height=16&method=crop" alt="" width="16" height="16" />Ananace</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1551425699164vABlc:kittenface.studio" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Just merged the protocol split branch I've been working on for the Ruby SDK, including a first PoC for an application service base. Not tested in any actual use as of yet, but expect Things TM in the next release.</p>
</blockquote>
<h2 id="koma">Koma</h2>
<p><a class="mx_Pill mx_UserPill" title="@uforia:matrix.org" data-reactroot=""><img class="mx_BaseAvatar mx_BaseAvatar_image" title="@uforia:matrix.org" src="/_matrix/media/v1/thumbnail/matrix.org/xGfKScyNXPYixLMhSHvCmbMO?width=16&height=16&method=crop" alt="" width="16" height="16" />yuforia</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1551429515692845yIsqv:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>in project <a href="https://github.com/koma-im" target="_blank" rel="noopener">koma</a>, a new bot <a href="https://github.com/koma-im/kotlin-matrix-userbots/tree/master/picsay" target="_blank" rel="noopener">picsay</a> is created. It like the classic easter-egg program <a href="https://en.wikipedia.org/wiki/Cowsay" target="_blank" rel="noopener">cowsay</a>, but it uses actual photos instead of ASCII art. It configured to use any image just by editing a json file. So you can run your own version for fun.</p>
</blockquote>
<h2 id="tchap">TChap</h2>
<p><a class="mx_Pill mx_UserPill" title="@willem:canarymod.net" data-reactroot=""><img class="mx_BaseAvatar mx_BaseAvatar_image" title="@willem:canarymod.net" src="/_matrix/media/v1/thumbnail/canarymod.net/akHJjhNnICOsiLXyfsZEDafc?width=16&height=16&method=crop" alt="" width="16" height="16" />Willem</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$15514524981180LAEMP:canarymod.net" rel="noopener">reports that</a>:</p>
<blockquote>
<p>I took some time to hack on Tchap again. This time I disabled virus scanning of thumbnails and downloads in Tchap to be able to see avatars. I also wrote a non-scanning virus scanner API implementation to be able to see files, pictures and videos that are sent. The updated Tchap can be found at <a class="linkified" href="https://github.com/14mRh4X0r/tchap-android" target="_blank" rel="noopener">https://github.com/14mRh4X0r/tchap-android</a>, the virus scanner API implementation at <a class="linkified" href="https://git.snt.utwente.nl/14mRh4X0r/tchap-media-scanner" target="_blank" rel="noopener">https://git.snt.utwente.nl/14mRh4X0r/tchap-media-scanner</a>.</p>
</blockquote>
<p><a href="/blog/wp-content/uploads/2019/03/tchap1.png"><img class="alignnone size-medium wp-image-4054" src="/blog/wp-content/uploads/2019/03/tchap1-169x300.png" alt="" width="169" height="300" /></a> <a href="/blog/wp-content/uploads/2019/03/tchap2.png"><img class="alignnone size-medium wp-image-4055" src="/blog/wp-content/uploads/2019/03/tchap2-169x300.png" alt="" width="169" height="300" /></a> <a href="/blog/wp-content/uploads/2019/03/tchap3.png"><img class="alignnone size-medium wp-image-4056" src="/blog/wp-content/uploads/2019/03/tchap3-142x300.png" alt="" width="142" height="300" /></a><a href="/blog/wp-content/uploads/2019/03/tchap4.png"><img class="alignnone size-medium wp-image-4060" src="/blog/wp-content/uploads/2019/03/tchap4-142x300.png" alt="" width="142" height="300" /></a></p>
<h2 id="debian">Debian</h2>
<p><a class="mx_Pill mx_UserPill" title="@andrewsh:matrix.org" data-reactroot=""><img class="mx_BaseAvatar mx_BaseAvatar_image" title="@andrewsh:matrix.org" src="/_matrix/media/v1/thumbnail/matrix.org/cVzxyvcpMBfoZIliFwYeLXRq?width=16&height=16&method=crop" alt="" width="16" height="16" />andrewsh</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1551441089734874fDpOO:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Unless things get seriously on fire in the coming months, Debian buster will have Synapse 0.99.2 plus something newer in backports</p>
</blockquote>
<h2 id="matrix-wug">Matrix WUG</h2>
<p><a href="https://matrix.to/#/@dandellion:dodsorf.as">Dandellion's</a> <a href="https://github.com/Dali99/matrix-wug">Wug</a> now supports Inuktitut Syllabics and Iñupiatun Orthography. In the bot's own words.</p>
<blockquote>
<p>Hi I can help you translate X-SAMPA, Z-SAMPA to IPA, and transcribe into proto-indo european notation! Use (x/z/p) together with either / or [] as delimiters x/"hEloU/ z[or` 5aIk DIz] p/mreghnom/</p>
<p>I also can transcribe to Inuktitut Syllabics like this: i[tusaumaqattautijjutinik aulattijiit]. Find my source at <a class="linkified" href="https://github.com/Dali99/matrix-wug" target="_blank" rel="noopener">https://github.com/Dali99/matrix-wug</a></p>
</blockquote>
<h2 id="new-rooms">New Rooms</h2>
<p><a href="https://matrix.to/#/@aaron:raim.ist" rel="nofollow">Aaron Raimist</a> has created a new room for Formula 1 fans:</p>
<blockquote>
<p>Now that the Formula 1 season is getting underway it's probably a good time to announce <a href="https://matrix.to/#/@CIA:matrix.org">@CIA:matrix.org</a>'s new(ish) room: <a href="https://matrix.to/#/#f1:matrix.org" rel="nofollow">#f1:matrix.org</a> When this blog post is released there will be 16 days left before the first race of the 2019 season<br />There was previously a Formula 1 room but it was merged with Snoonet's IRC channel which tends to be extremely busy. This is a matrix only room.</p>
</blockquote>
<p>That's it folks, your normal Ben orientated programming will continue next week. Bring back Ben, bring back Ben.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;02&#x2F;15&#x2F;publishing-the-backend-roadmap&#x2F;" title="Publishing the Backend Roadmap">Publishing the Backend Roadmap</a></h2>
                <span>
                    15.02.2019 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Good people,</p>
<p>2019 is a big year for Matrix, in the next month we will have shipped:</p>
<ul>
 	<li style="font-weight: 400;">Matrix spec 1.0 (including the first stable release of the Server to Server Spec)
</li>
 	<li style="font-weight: 400;">Synapse 1.0
</li>
 	<li style="font-weight: 400;">Riot 1.0
</li>
</ul>
This is huge in itself, but is really only the beginning, and now we want to grow the ecosystem as quickly as possible. This means landing a mix of new features, enhancing existing ones, some big performance improvements as well as generally making life easier for our regular users, homeserver admins and community developers.
<p>Today we are sharing the Matrix core team's backend roadmap. The idea is that this will make it easier for anyone to understand where the project is going, what we consider to be important, and why.</p>
<p>To see the roadmap in its full glory, <a href="https://github.com/orgs/matrix-org/projects/9">take a look here</a>.</p>
<h3 id="what-is-a-roadmap-and-why-is-it-valuable">What is a roadmap and why is it valuable?</h3>
<p>A roadmap is a set of high level projects that the team intend to work on and a rough sense of the relative priority. It is essential to focus on specific goals, which inevitably means consciously not working on other initiatives.</p>
<p>Our roadmap is not a delivery plan - there are explicitly no dates. The reason for this is that we know that other projects will emerge, developers will be needed to support other urgent initiatives, matrix.org use continues to grow exponentially and will require performance tweaking.</p>
<p>So simply, based on what we know now, this is the order we will work on our projects.</p>
<h3 id="why-are-we-sharing-it">Why are we sharing it?</h3>
<p>We already share our <a href="https://github.com/orgs/matrix-org/projects/8">day to day todo list</a>, and of course our commit history, but it can be difficult for a casual observer to see the bigger picture from such granular data. The purpose of sharing is that we want anyone from the community to understand where our priorities lie.</p>
<p>We are often asked ‘Why are you not working on X, it is really important' where the answer is often ‘We agree that X is really important, but A, B and C are more important and must come first'.</p>
<p>The point of sharing the roadmap is to make that priority trade off more transparent and consumable.</p>
<h3 id="how-did-we-build-it">How did we build it?</h3>
<p>The core contributors to Synapse and Dendrite are 6 people, of 5 nationalities spread across 3 locations. After shipping the <a href="/docs/spec/server_server/r0.1.1.html">r0 release of the Server to Server spec</a> last month we took some time to step back and have a think about what to do after Synapse 1.0 lands. This meant getting everyone in one place to talk it through.</p>
<p>We also had Ben (benpa) contribute from a community perspective and took input from speaking to so many of you at FOSDEM.</p>
<p>In the end we filled a wall with post-its, each post-it representing a sizeable project. The position of the post-it was significant in that the vertical axis being a sense of how valuable we thought the task would be, and the horizontal axis being a rough guess on how complex we considered it to be.</p>
<p>We found this sort of grid approach to be really helpful in determining relative priority.</p>
<p>After many hours and plenty of blood, sweat and tears we ended up with something we could live with and wrote it up in the <a href="https://github.com/orgs/matrix-org/projects/9">shared board</a>.</p>
<p><a href="/blog/wp-content/uploads/2019/02/IMG_2247.jpg"><img class="alignnone size-medium wp-image-3996" src="/blog/wp-content/uploads/2019/02/IMG_2247-300x225.jpg" alt="" width="300" height="225" /></a><a href="/blog/wp-content/uploads/2019/02/IMG_2245.jpg"><img class="alignnone size-medium wp-image-3990" src="/blog/wp-content/uploads/2019/02/IMG_2245-300x225.jpg" alt="" width="300" height="225" /></a></p>
<h3 id="and-this-is-written-in-blood-right">And this is written in blood right?</h3>
<p>Not at all (it's written in board marker). This is simply a way to express our plan of action and we are likely to make changes to it dynamically. However, this means that at any given moment, if someone wants to know what we are working on then the roadmap is the place to go.</p>
<h3 id="but-wait-i-want-to-know-more">But wait I want to know more!</h3>
<p>Here is a video of myself and Matthew to talk you through the projects</p>
<noscript>Today's Matrix Live: <a href="https://youtube.com/watch?v=LfyQ6cNGbLk">https://youtube.com/watch?v=LfyQ6cNGbLk</a></noscript>
<youtube-player video-id="LfyQ6cNGbLk"></youtube-player>
<h3 id="interesting-but-i-have-questions">Interesting, but I have questions ...</h3>
<p>Any feedback gratefully received, come and ask questions in <a href="https://matrix.to/#/#synapse:matrix.org">#synapse</a> or <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite</a> or feel free to ping me direct at @neilj:matrix.org</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;02&#x2F;14&#x2F;synapse-0-99-1-1-released&#x2F;" title="Synapse 0.99.1.1 Released!">Synapse 0.99.1.1 Released!</a></h2>
                <span>
                    14.02.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey, everyone, today is the day we release Synapse 0.99.1.1</p>
<p>This release contains improved ACME support to make it even easier to get going with TLS certs on your federation end points, plus some tweaks to make the room version upgrade path easier.</p>
<p>Just as a reminder that the 0.99.x series is precursor for our 1.0 release (which will land in early March, exact date to be confirmed) - it is really important that all server admins are aware that self signed certificates on the Server to Server API will no longer be accepted by &gt;= Synapse 1.0. If you have not already done so, now is the time to configure your certificate. For more info see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">FAQ</a> and if you get stuck come and join us in <a href="https://matrix.to/#/#synapse:matrix.org">#Synapse.</a></p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.1.1">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<h2 id="synapse-0-99-1-1-changelog">Synapse 0.99.1.1 Changelog</h2>
<h3 id="bugfixes">Bugfixes</h3>
<ul>
 	<li>Fix "TypeError: '&gt;' not supported" when starting without an existing certificate.
Fix a bug where an existing certificate would be reprovisoned every day. (<a href="https://github.com/matrix-org/synapse/issues/4648" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4648/hovercard" aria-describedby="hovercard-aria-description">#4648</a>)</li>
</ul>
<h2 id="synapse-0-99-1-changelog">Synapse 0.99.1 Changelog</h2>
<h3 id="features">Features</h3>
<ul>
 	<li>Include m.room.encryption on invites by default (<a href="https://github.com/matrix-org/synapse/issues/3902" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3902/hovercard" aria-describedby="hovercard-aria-description">#3902</a>)</li>
 	<li>Federation OpenID listener resource can now be activated even if federation is disabled (<a href="https://github.com/matrix-org/synapse/issues/4420" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4420/hovercard" aria-describedby="hovercard-aria-description">#4420</a>)</li>
 	<li>Synapse's ACME support will now correctly reprovision a certificate that approaches its expiry while Synapse is running. (<a href="https://github.com/matrix-org/synapse/issues/4522" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4522/hovercard" aria-describedby="hovercard-aria-description">#4522</a>)</li>
 	<li>Add ability to update backup versions (<a href="https://github.com/matrix-org/synapse/issues/4580" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4580/hovercard" aria-describedby="hovercard-aria-description">#4580</a>)</li>
 	<li>Allow the "unavailable" presence status for /sync.
This change makes Synapse compliant with r0.4.0 of the Client-Server specification. (<a href="https://github.com/matrix-org/synapse/issues/4592" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4592/hovercard" aria-describedby="hovercard-aria-description">#4592</a>)</li>
 	<li>There is no longer any need to specify <code>no_tls</code>: it is inferred from the absence of TLS listeners (<a href="https://github.com/matrix-org/synapse/issues/4613" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4613/hovercard" aria-describedby="hovercard-aria-description">#4613</a>, <a href="https://github.com/matrix-org/synapse/issues/4615" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4615/hovercard" aria-describedby="hovercard-aria-description">#4615</a>, <a href="https://github.com/matrix-org/synapse/issues/4617" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4617/hovercard" aria-describedby="hovercard-aria-description">#4617</a>, <a href="https://github.com/matrix-org/synapse/issues/4636" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4636/hovercard" aria-describedby="hovercard-aria-description">#4636</a>)</li>
 	<li>The default configuration no longer requires TLS certificates. (<a href="https://github.com/matrix-org/synapse/issues/4614" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4614/hovercard" aria-describedby="hovercard-aria-description">#4614</a>)</li>
</ul>
<h3 id="bugfixes-1">Bugfixes</h3>
<ul>
 	<li>Copy over room federation ability on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4530" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4530/hovercard" aria-describedby="hovercard-aria-description">#4530</a>)</li>
 	<li>Fix noisy "twisted.internet.task.TaskStopped" errors in logs (<a href="https://github.com/matrix-org/synapse/issues/4546" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4546/hovercard" aria-describedby="hovercard-aria-description">#4546</a>)</li>
 	<li>Synapse is now tolerant of the <code>tls_fingerprints</code> option being None or not specified. (<a href="https://github.com/matrix-org/synapse/issues/4589" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4589/hovercard" aria-describedby="hovercard-aria-description">#4589</a>)</li>
 	<li>Fix 'no unique or exclusion constraint' error (<a href="https://github.com/matrix-org/synapse/issues/4591" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4591/hovercard" aria-describedby="hovercard-aria-description">#4591</a>)</li>
 	<li>Transfer Server ACLs on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4608" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4608/hovercard" aria-describedby="hovercard-aria-description">#4608</a>)</li>
 	<li>Fix failure to start when not TLS certificate was given even if TLS was disabled. (<a href="https://github.com/matrix-org/synapse/issues/4618" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4618/hovercard" aria-describedby="hovercard-aria-description">#4618</a>)</li>
 	<li>Fix self-signed cert notice from generate-config. (<a href="https://github.com/matrix-org/synapse/issues/4625" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4625/hovercard" aria-describedby="hovercard-aria-description">#4625</a>)</li>
 	<li>Fix performance of <code>user_ips</code> table deduplication background update (<a href="https://github.com/matrix-org/synapse/issues/4626" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4626/hovercard" aria-describedby="hovercard-aria-description">#4626</a>, <a href="https://github.com/matrix-org/synapse/issues/4627" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4627/hovercard" aria-describedby="hovercard-aria-description">#4627</a>)</li>
</ul>
<h3 id="internal-changes">Internal Changes</h3>
<ul>
 	<li>Change the user directory state query to use a filtered call to the db instead of a generic one. (<a href="https://github.com/matrix-org/synapse/issues/4462" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4462/hovercard" aria-describedby="hovercard-aria-description">#4462</a>)</li>
 	<li>Reject federation transactions if they include more than 50 PDUs or 100 EDUs. (<a href="https://github.com/matrix-org/synapse/issues/4513" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4513/hovercard" aria-describedby="hovercard-aria-description">#4513</a>)</li>
 	<li>Reduce duplication of <code>synapse.app</code> code. (<a href="https://github.com/matrix-org/synapse/issues/4567" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4567/hovercard" aria-describedby="hovercard-aria-description">#4567</a>)</li>
 	<li>Fix docker upload job to push -py2 images. (<a href="https://github.com/matrix-org/synapse/issues/4576" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4576/hovercard" aria-describedby="hovercard-aria-description">#4576</a>)</li>
 	<li>Add port configuration information to ACME instructions. (<a href="https://github.com/matrix-org/synapse/issues/4578" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4578/hovercard" aria-describedby="hovercard-aria-description">#4578</a>)</li>
 	<li>Update MSC1711 FAQ to clarify .well-known usage (<a href="https://github.com/matrix-org/synapse/issues/4584" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4584/hovercard" aria-describedby="hovercard-aria-description">#4584</a>)</li>
 	<li>Clean up default listener configuration (<a href="https://github.com/matrix-org/synapse/issues/4586" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4586/hovercard" aria-describedby="hovercard-aria-description">#4586</a>)</li>
 	<li>Clarifications for reverse proxy docs (<a href="https://github.com/matrix-org/synapse/issues/4607" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4607/hovercard" aria-describedby="hovercard-aria-description">#4607</a>)</li>
 	<li>Move ClientTLSOptionsFactory init out of <code>refresh_certificates</code> (<a href="https://github.com/matrix-org/synapse/issues/4611" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4611/hovercard" aria-describedby="hovercard-aria-description">#4611</a>)</li>
 	<li>Fail cleanly if listener config lacks a 'port' (<a href="https://github.com/matrix-org/synapse/issues/4616" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4616/hovercard" aria-describedby="hovercard-aria-description">#4616</a>)</li>
 	<li>Remove redundant entries from docker config (<a href="https://github.com/matrix-org/synapse/issues/4619" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4619/hovercard" aria-describedby="hovercard-aria-description">#4619</a>)</li>
 	<li>README updates (<a href="https://github.com/matrix-org/synapse/issues/4621" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4621/hovercard" aria-describedby="hovercard-aria-description">#4621</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;02&#x2F;05&#x2F;synapse-0-99-0&#x2F;" title="Synapse 0.99.0">Synapse 0.99.0</a></h2>
                <span>
                    05.02.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey hey, Synapse 0.99.0 is here!</p>
<p>You may have heard that we recently published the first stable release of the <a href="/docs/spec/server_server/r0.1.0.html">Server to Server Spec (r0.1)</a>. The spec makes some changes which are not compatible with the protocol of the past - particularly, <strong>self-signed certificates are no longer valid for homeservers. </strong>Synapse 1.0.0 will be compliant with r0.1 and the goal of Synapse 0.99.0 is to act as a stepping stone to Synapse 1.0. Synapse 0.99.0 supports the r0.1 release of the server to server specification, but is compatible with both the legacy Matrix federation behaviour (pre-r0.1) as well as post-r0.1 behaviour, in order to allow for a smooth upgrade across the federation.</p>
<p><strong>It is critical that all admins upgrade to 0.99.0 and configure a valid TLS certificate. </strong>Admins will have 1 month to do so, after which 1.0.0 will be released and those servers without a valid certificate will no longer be able to federate with &gt;= 1.0.0 servers.</p>
<p>First of all, please don't panic :) We have taken steps to make this process as simple as possible - specifically implementing ACME support to allow servers to automatically generate free Let's Encrypt certificates if you choose to. What's more, it is not necessary to add the certificate right away, you have at least a month to get set up.</p>
<p>For more details on exactly what you need to do (and also why this change is essential), we have provided an <strong>extensive <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">FAQ</a></strong> as well as the <a href="https://github.com/matrix-org/synapse/blob/release-v0.99.0/UPGRADE.rst">Upgrade notes for Synapse</a></p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<p>This was a huge effort! Congratulations to all involved, especially those of you in the community who contributed to spec MSCs and tested our release candidates. Thank you for bearing with us as we move the whole public Matrix Federation onto r0.1 compliant servers.</p>
<p>Onwards!</p>
<h2 id="changelog">Changelog</h2>
<p>Synapse v0.99.x is a precursor to the upcoming Synapse v1.0 release. It contains foundational changes to room architecture and the federation security model necessary to support the upcoming r0 release of the Server to Server API.</p>
<h2 id="features">Features</h2>
<ul>
 	<li>Synapse's cipher string has been updated to require ECDH key exchange. Configuring and generating dh_params is no longer required, and they will be ignored. (<a href="https://github.com/matrix-org/synapse/issues/4229">#4229</a>)</li>
 	<li>Synapse can now automatically provision TLS certificates via ACME (the protocol used by CAs like Let's Encrypt). (<a href="https://github.com/matrix-org/synapse/issues/4384">#4384</a>, <a href="https://github.com/matrix-org/synapse/issues/4492">#4492</a>, <a href="https://github.com/matrix-org/synapse/issues/4525">#4525</a>, <a href="https://github.com/matrix-org/synapse/issues/4572">#4572</a>, <a href="https://github.com/matrix-org/synapse/issues/4564">#4564</a>, <a href="https://github.com/matrix-org/synapse/issues/4566">#4566</a>, <a href="https://github.com/matrix-org/synapse/issues/4547">#4547</a>, <a href="https://github.com/matrix-org/synapse/issues/4557">#4557</a>)</li>
 	<li>Implement MSC1708 (.well-known routing for server-server federation) (<a href="https://github.com/matrix-org/synapse/issues/4408">#4408</a>, <a href="https://github.com/matrix-org/synapse/issues/4409">#4409</a>, <a href="https://github.com/matrix-org/synapse/issues/4426">#4426</a>, <a href="https://github.com/matrix-org/synapse/issues/4427">#4427</a>, <a href="https://github.com/matrix-org/synapse/issues/4428">#4428</a>, <a href="https://github.com/matrix-org/synapse/issues/4464">#4464</a>, <a href="https://github.com/matrix-org/synapse/issues/4468">#4468</a>, <a href="https://github.com/matrix-org/synapse/issues/4487">#4487</a>, <a href="https://github.com/matrix-org/synapse/issues/4488">#4488</a>, <a href="https://github.com/matrix-org/synapse/issues/4489">#4489</a>, <a href="https://github.com/matrix-org/synapse/issues/4497">#4497</a>, <a href="https://github.com/matrix-org/synapse/issues/4511">#4511</a>, <a href="https://github.com/matrix-org/synapse/issues/4516">#4516</a>, <a href="https://github.com/matrix-org/synapse/issues/4520">#4520</a>, <a href="https://github.com/matrix-org/synapse/issues/4521">#4521</a>, <a href="https://github.com/matrix-org/synapse/issues/4539">#4539</a>, <a href="https://github.com/matrix-org/synapse/issues/4542">#4542</a>, <a href="https://github.com/matrix-org/synapse/issues/4544">#4544</a>)</li>
 	<li>Search now includes results from predecessor rooms after a room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4415">#4415</a>)</li>
 	<li>Config option to disable requesting MSISDN on registration. (<a href="https://github.com/matrix-org/synapse/issues/4423">#4423</a>)</li>
 	<li>Add a metric for tracking event stream position of the user directory. (<a href="https://github.com/matrix-org/synapse/issues/4445">#4445</a>)</li>
 	<li>Support exposing server capabilities in CS API (MSC1753, MSC1804) (<a href="https://github.com/matrix-org/synapse/issues/4472">#4472</a>, <a href="https://github.com/matrix-org/synapse/commit/81b7e7eed323f55d6550e7a270a9dc2c4c7b0fe0">81b7e7eed</a>))</li>
 	<li>Add support for room version 3 (<a href="https://github.com/matrix-org/synapse/issues/4483">#4483</a>, <a href="https://github.com/matrix-org/synapse/issues/4499">#4499</a>, <a href="https://github.com/matrix-org/synapse/issues/4515">#4515</a>, <a href="https://github.com/matrix-org/synapse/issues/4523">#4523</a>, <a href="https://github.com/matrix-org/synapse/issues/4535">#4535</a>)</li>
 	<li>Synapse will now reload TLS certificates from disk upon SIGHUP. (<a href="https://github.com/matrix-org/synapse/issues/4495">#4495</a>, <a href="https://github.com/matrix-org/synapse/issues/4524">#4524</a>)</li>
 	<li>The matrixdotorg/synapse Docker images now use Python 3 by default. (<a href="https://github.com/matrix-org/synapse/issues/4558">#4558</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
 	<li>Prevent users with access tokens predating the introduction of device IDs from creating spurious entries in the user_ips table. (<a href="https://github.com/matrix-org/synapse/issues/4369">#4369</a>)</li>
 	<li>Fix typo in ALL_USER_TYPES definition to ensure type is a tuple (<a href="https://github.com/matrix-org/synapse/issues/4392">#4392</a>)</li>
 	<li>Fix high CPU usage due to remote devicelist updates (<a href="https://github.com/matrix-org/synapse/issues/4397">#4397</a>)</li>
 	<li>Fix potential bug where creating or joining a room could fail (<a href="https://github.com/matrix-org/synapse/issues/4404">#4404</a>)</li>
 	<li>Fix bug when rejecting remote invites (<a href="https://github.com/matrix-org/synapse/issues/4405">#4405</a>, <a href="https://github.com/matrix-org/synapse/issues/4527">#4527</a>)</li>
 	<li>Fix incorrect logcontexts after a Deferred was cancelled (<a href="https://github.com/matrix-org/synapse/issues/4407">#4407</a>)</li>
 	<li>Ensure encrypted room state is persisted across room upgrades. (<a href="https://github.com/matrix-org/synapse/issues/4411">#4411</a>)</li>
 	<li>Copy over whether a room is a direct message and any associated room tags on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4412">#4412</a>)</li>
 	<li>Fix None guard in calling config.server.is_threepid_reserved (<a href="https://github.com/matrix-org/synapse/issues/4435">#4435</a>)</li>
 	<li>Don't send IP addresses as SNI (<a href="https://github.com/matrix-org/synapse/issues/4452">#4452</a>)</li>
 	<li>Fix UnboundLocalError in post_urlencoded_get_json (<a href="https://github.com/matrix-org/synapse/issues/4460">#4460</a>)</li>
 	<li>Add a timeout to filtered room directory queries. (<a href="https://github.com/matrix-org/synapse/issues/4461">#4461</a>)</li>
 	<li>Workaround for login error when using both LDAP and internal authentication. (<a href="https://github.com/matrix-org/synapse/issues/4486">#4486</a>)</li>
 	<li>Fix a bug where setting a relative consent directory path would cause a crash. (<a href="https://github.com/matrix-org/synapse/issues/4512">#4512</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
 	<li>Synapse no longer generates self-signed TLS certificates when generating a configuration file. (<a href="https://github.com/matrix-org/synapse/issues/4509">#4509</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
 	<li>Update debian installation instructions (<a href="https://github.com/matrix-org/synapse/issues/4526">#4526</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
 	<li>Synapse will now take advantage of native UPSERT functionality in PostgreSQL 9.5+ and SQLite 3.24+. (<a href="https://github.com/matrix-org/synapse/issues/4306">#4306</a>, <a href="https://github.com/matrix-org/synapse/issues/4459">#4459</a>, <a href="https://github.com/matrix-org/synapse/issues/4466">#4466</a>, <a href="https://github.com/matrix-org/synapse/issues/4471">#4471</a>, <a href="https://github.com/matrix-org/synapse/issues/4477">#4477</a>, <a href="https://github.com/matrix-org/synapse/issues/4505">#4505</a>)</li>
 	<li>Update README to use the new virtualenv everywhere (<a href="https://github.com/matrix-org/synapse/issues/4342">#4342</a>)</li>
 	<li>Add better logging for unexpected errors while sending transactions (<a href="https://github.com/matrix-org/synapse/issues/4368">#4368</a>)</li>
 	<li>Apply a unique index to the user_ips table, preventing duplicates. (<a href="https://github.com/matrix-org/synapse/issues/4370">#4370</a>, <a href="https://github.com/matrix-org/synapse/issues/4432">#4432</a>, <a href="https://github.com/matrix-org/synapse/issues/4434">#4434</a>)</li>
 	<li>Silence travis-ci build warnings by removing non-functional python3.6 (<a href="https://github.com/matrix-org/synapse/issues/4377">#4377</a>)</li>
 	<li>Fix a comment in the generated config file (<a href="https://github.com/matrix-org/synapse/issues/4387">#4387</a>)</li>
 	<li>Add ground work for implementing future federation API versions (<a href="https://github.com/matrix-org/synapse/issues/4390">#4390</a>)</li>
 	<li>Update dependencies on msgpack and pymacaroons to use the up-to-date packages. (<a href="https://github.com/matrix-org/synapse/issues/4399">#4399</a>)</li>
 	<li>Tweak codecov settings to make them less loud. (<a href="https://github.com/matrix-org/synapse/issues/4400">#4400</a>)</li>
 	<li>Implement server support for MSC1794 - Federation v2 Invite API (<a href="https://github.com/matrix-org/synapse/issues/4402">#4402</a>)</li>
 	<li>debian package: symlink to explicit python version (<a href="https://github.com/matrix-org/synapse/issues/4433">#4433</a>)</li>
 	<li>Add infrastructure to support different event formats (<a href="https://github.com/matrix-org/synapse/issues/4437">#4437</a>, <a href="https://github.com/matrix-org/synapse/issues/4447">#4447</a>, <a href="https://github.com/matrix-org/synapse/issues/4448">#4448</a>, <a href="https://github.com/matrix-org/synapse/issues/4470">#4470</a>, <a href="https://github.com/matrix-org/synapse/issues/4481">#4481</a>, <a href="https://github.com/matrix-org/synapse/issues/4482">#4482</a>, <a href="https://github.com/matrix-org/synapse/issues/4493">#4493</a>, <a href="https://github.com/matrix-org/synapse/issues/4494">#4494</a>, <a href="https://github.com/matrix-org/synapse/issues/4496">#4496</a>, <a href="https://github.com/matrix-org/synapse/issues/4510">#4510</a>, <a href="https://github.com/matrix-org/synapse/issues/4514">#4514</a>)</li>
 	<li>Generate the debian config during build (<a href="https://github.com/matrix-org/synapse/issues/4444">#4444</a>)</li>
 	<li>Clarify documentation for the <code>public_baseurl</code> config param (<a href="https://github.com/matrix-org/synapse/issues/4458">#4458</a>, <a href="https://github.com/matrix-org/synapse/issues/4498">#4498</a>)</li>
 	<li>Fix quoting for allowed_local_3pids example config (<a href="https://github.com/matrix-org/synapse/issues/4476">#4476</a>)</li>
 	<li>Remove deprecated --process-dependency-links option from UPGRADE.rst (<a href="https://github.com/matrix-org/synapse/issues/4485">#4485</a>)</li>
 	<li>Make it possible to set the log level for tests via an environment variable (<a href="https://github.com/matrix-org/synapse/issues/4506">#4506</a>)</li>
 	<li>Reduce the log level of linearizer lock acquirement to DEBUG. (<a href="https://github.com/matrix-org/synapse/issues/4507">#4507</a>)</li>
 	<li>Fix code to comply with linting in PyFlakes 3.7.1. (<a href="https://github.com/matrix-org/synapse/issues/4519">#4519</a>)</li>
 	<li>Add some debug for membership syncing issues (<a href="https://github.com/matrix-org/synapse/issues/4538">#4538</a>)</li>
 	<li>Docker: only copy what we need to the build image (<a href="https://github.com/matrix-org/synapse/issues/4562">#4562</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;01&#x2F;15&#x2F;further-details-on-critical-security-update-in-synapse-affecting-all-versions-prior-to-0-34-1-cve-2019-5885&#x2F;" title="Further details on Critical Security Update in Synapse affecting all versions prior to 0.34.1 (CVE-2019-5885)">Further details on Critical Security Update in Synapse affecting all versions prior to 0.34.1 (CVE-2019-5885)</a></h2>
                <span>
                    15.01.2019 00:00
                    —
                    <a href="/category/security">
                        Security
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>On <a href="/blog/2019/01/10/critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1/">Thursday Jan 10th we released a Critical Security Update (Synapse 0.34.0.1/0.34.1.1)</a>, which fixes a serious security bug in Synapse 0.34.0 and earlier. Many deployments have now upgraded to 0.34.0.1 or 0.34.1.1, and we now consider it appropriate to disclose more information about the issue, to provide context and <b>encourage the remaining affected servers to upgrade as soon as possible</b>.</p>
<p>In Synapse 0.11 (Nov 2015) we added a configuration parameter called “macaroon_secret_key” which relates to our use of <a href="https://ai.google/research/pubs/pub41892">macaroons</a> in authentication. Macaroons are authentication tokens which must be signed by the server which generates them, to prevent them being forged by attackers. “macaroon_secret_key” defines the key which is used for this signature, and it must therefore be kept secret to preserve the security of the server.</p>
<p>If the option is not set, Synapse will attempt to derive a secret key from other secrets specified in the configuration file. However, in all versions of Synapse up to and including 0.34.0, this process was faulty and a predictable value was used instead.</p>
<p><b>So if, your homeserver.yaml does not contain a macaroon_secret_key, you need to upgrade to 0.34.1.1 or 0.34.0.1 or Debian 0.34.0-3~bpo9+2 immediately to prevent the risk of account hijacking.</b></p>
<p>The vulnerability affects any Synapse installation which does not have a macaroon_secret_key setting. <b>For example, the Debian and Ubuntu packages from Matrix.org, Debian and Ubuntu include a configuration file without an explicit macaroon_secret_key and must upgrade. </b>Anyone who hasn't updated their config since Nov 2015 or who grandfathered their config from the Debian/Ubuntu packages will likely also be affected.</p>
<p>We are not aware of this vulnerability being exploited in the wild, but if you are running an affected server it may still be wise to check your synapse's user_ips database table for any unexpected access to your server's accounts. You could also check your accounts' device lists (shown under Settings in Riot) for unexpected devices, although this is not as reliable as an attacker could cover their tracks to remove unexpected devices.</p>
<p>We'll publish a full post-mortem of the issue once we are confident that most affected servers have been upgraded.</p>
<p>We'd like to apologise for the inconvenience caused by this - especially to folks who upgraded since Friday who were in practice not affected. Due to the nature of the issue we wanted to minimise details about the issue until people had a chance to upgrade. We also did not follow a planned disclosure procedure because Synapse 0.34.1 already unintentionally disclosed the existence of the bug by fixing it (causing the logout bug for affected users which led us to pull the original Synapse 0.34.1 release).</p>
<p>On the plus side, we are approaching the end of beta for Synapse, and going forwards hope to see much better stability and security across the board.</p>
<p>Thanks again for your patience,</p>
<p>The Matrix.org Team</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;01&#x2F;11&#x2F;this-week-in-matrix-2019-01-11&#x2F;" title="This Week in Matrix 2019-01-11">This Week in Matrix 2019-01-11</a></h2>
                <span>
                    11.01.2019 00:00
                    —
                    <a href="/category/this-week-in-matrix">
                        This Week in Matrix
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <h2 id="welcome">Welcome!</h2>
<p>Do not panic, Benpa is away, I repeat, Benpa is away. Nonetheless TWIM lives on!</p>
<h2 id="spec">Spec</h2>
<p>Lots of spec work this week, and a shout out to <a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> for his magical <a href="https://matrix.to/#/@mscbot:matrix.org">mscbot </a>that provides pokes, nudges and updates on all things spec. Here's what <a href="https://matrix.to/#/@mscbot:matrix.org">mscbot</a> had to say about the past week.</p>
<p><strong>Approved MSCs</strong></p>
<p><a href="https://github.com/matrix-org/matrix-doc/issues/1497">[MSC 1497]: Advertising support of experimental features in the CS API</a>
<a href="https://github.com/matrix-org/matrix-doc/issues/1339">[MSC 1339]: Proposal to add a GET method to read account data</a>
<a href="https://github.com/matrix-org/matrix-doc/issues/1501">[MSC 1501]: Room version upgrades</a></p>
<p><strong>Final Comment Period</strong></p>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/1708">MSC 1708: .well-known support for server name resolution</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1711">MSC 1711: X.509 certificate verification for federation connections</a></p>
<p><strong>New and In Progress MSCs</strong></p>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/1794">[MSC 1794]: Federation v2 Invite API</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1796">[MSC 1796]: Improved e2e notifications</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1797">[MSC 1797]: Proposal for more granular profile error codes</a>
<a href="https://github.com/matrix-org/matrix-doc/issues/1640">[MSC 1640]: Replace event IDs with hashes</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1776">[MSC 1776]: Implementing peeking via /sync</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1777">[MSC 1777]: peeking over federation</a>
<a href="https://github.com/matrix-org/matrix-doc/pull/1779">[MSC 1779]: Proposal for Open Governance for Matrix.org (v2)</a></p>
<p>(A few may be missing as we're still tweaking mscbot :)</p>
<h2 id="dendrite">Dendrite</h2>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a> had this to say:-</p>
<blockquote>
<p>The Dendrite audit is over! A bunch of issues have been created on the Dendrite GitHub repository, as well as a project board in order to keep track of everything: <a href="https://github.com/matrix-org/dendrite/projects/2">https://github.com/matrix-org/dendrite/projects/2
</a>There's a fair amount of issues that have been labeled as “good first issue”, so feel free to pick them up and open pull requests if you're looking into hacking on Dendrite! :)</p>
</blockquote>
<p>And whilst we have your attention - here's Brendan &amp; Matthew talking through the audit in this week's Matrix Live!</p>
<noscript>Today's Matrix Live: <a href="https://youtube.com/watch?v=NaxL-jNvcSA">https://youtube.com/watch?v=NaxL-jNvcSA</a></noscript>
<youtube-player video-id="NaxL-jNvcSA"></youtube-player>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> says:-</p>
<blockquote>
<p><b>both contain critical security updates </b><b>so please update asap</b> for more details, we'll be able to share a bit more about the vuln once admins have had a chance to upgrade.</p>
<p>Meanwhile Hawkowl has been cranking out bug fixes and perf improvements and in particular taking a look at taming the user_ips table.</p>
</blockquote>
<p>While Debian packager Andrewsh adds:-</p>
<blockquote>
<p>latest synapse (0.34.1.1, Python 3) <a href="https://tracker.debian.org/news/1019454/accepted-matrix-synapse-03411-1-source-into-unstable/" target="_blank" rel="noopener">in Debian</a>, fixing <a href="https://security-tracker.debian.org/tracker/CVE-2019-5885" target="_blank" rel="noopener">CVE-2019-5885</a>; an update to a previous release fixing this CVE <a href="https://tracker.debian.org/news/1019458/accepted-matrix-synapse-0340-3bpo92-source-into-stretch-backports/" target="_blank" rel="noopener">uploaded</a> to stretch-backports, using Python 2. Dependencies for a Python 3 upload <a href="https://tracker.debian.org/news/1019728/accepted-python-treq-1860-01bpo91-all-source-into-stretch-backports-stretch-backports/" target="_blank" rel="noopener">approved</a> in <a href="https://tracker.debian.org/news/1019734/accepted-python-frozendict-12-1bpo91-all-source-into-stretch-backports-stretch-backports/" target="_blank" rel="noopener">stretch-backports</a>, a Python 3 upload of 0.34.1.1 will be following later this week</p>
</blockquote>
<h2 id="riot-ios">Riot/iOS</h2>
<blockquote>
<p>Riot-iOS 0.7.11 has been released, with lots of bug fixes.</p>
<p>We have been working on e2e new screens (like key backup setup) and the re-skinning of the app.</p>
</blockquote>
<h2 id="riot-android">Riot/Android</h2>
<blockquote>
<p>Working to improve notifications style.</p>
<p>Split screen mode will be supported on next release!</p>
<p>Continuous autofocus on the Camera has been enabled.</p>
<p>Also fighting bugs on registration.</p>
</blockquote>
<h2 id="bridges">Bridges</h2>
<p><a href="https://matrix.to/#/@@Half-Shot:half-shot.uk">Halfshot</a> has this to say:</p>
<blockquote>
<p>Matrix-appservice-purple is being renamed to matrix-<a href="https://en.wikipedia.org/wiki/Bifr%C3%B6st" target="_blank" rel="noopener">bifröst</a>, on the basis that we now bridge to things and "burning rainbow bridge" seemed like a good description.</p>
<p>Other things that have happened: <em>Performance improvements, as always. </em>XMPP -&gt; Matrix typing notifications <em>XMPP -&gt; Matrix avatars </em>XMPP -&gt; Matrix uploads * Matrix -&gt; XMPP uploads (via oob)</p>
</blockquote>
<p>and then follows up with this:-</p>
<blockquote>
<p>As promised, we've got a discord bridge release out today. v0.4.0-rc1 has landed! See the change notes <a class="linkified" href="https://github.com/Half-Shot/matrix-appservice-discord/releases/tag/v0.4.0-rc1" target="_blank" rel="noopener">https://github.com/Half-Shot/matrix-appservice-discord/releases/tag/v0.4.0-rc1</a> . Thank you to Sorunome for doing a huge amount of work on this!<br /><a class="mx_UserPill" title="@swedneck:swedneck.xyz" data-reactroot="">@swedneck</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$154722932544963VxLcM:swedneck.xyz" rel="noopener">reports that</a>:</p>
</blockquote>
<blockquote>
<p><a class="linkified" href="http://linuxgaming.life/" target="_blank" rel="noopener">linuxgaming.life</a> is now running matrix-appservice-discord v0.4.0-rc1.</p>
</blockquote>
<h2 id="matrix-org-foundation">Matrix.org Foundation</h2>
<p>Matthew has a final draft of the Matrix.org Foundation governance document ready: <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1779/proposals/1779-open-governance.md">https://github.com/matrix-org/matrix-doc/blob/matthew/msc1779/proposals/1779-open-governance.md</a>. Comments on <a href="https://github.com/matrix-org/matrix-doc/pull/1779">https://github.com/matrix-org/matrix-doc/pull/1779</a> would be much appreciated!  We expect to propose merging it next week, and then incorporating it into the final Articles of the foundation.</p>
<h2 id="riot-web">Riot Web</h2>
<p>Loads and loads of work happening on <a href="https://riot.im/experimental">https://riot.im/experimental</a> which is now where all new development is happening as we race towards launching the new design.  Highlights include:</p>
<ul>
 	<li>All new key verification is implemented! (in olm & matrix-js-sdk).  We're currently hooking up the UX.</li>
 	<li>Online key backup is pretty much finished.</li>
 	<li>Cross-signing is up next.</li>
 	<li>Redesign backlog is progressing (slightly stuck on making the RoomList resizing work nicely, but almost there)</li>
 	<li>Finalising the all new registration/login screens</li>
 	<li>...and loads of other stuff too.</li>
</ul>
<h2 id="meanwhile">Meanwhile...</h2>
<p><a class="mx_UserPill" title="@kitsune:matrix.org" data-reactroot="">kitsune</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$15467525032230233Dzybl:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Sending files landed in master branches of libQMatrixClient and Quaternion. Finally you can send your Quaternion screenshots (as any other images, jingles, cat videos etc.) to Matrix using Quaternion ;)</p>
<p>Also, libQMatrixClient is available as a Conan repository, for developers who'd like to use Conan to track dependencies.</p>
</blockquote>
<p><a class="mx_UserPill" title="@progserega:rsprim.ru" data-reactroot="">progserega</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1546773191109249XkFRT:rsprim.ru" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Hello to all! I am write matrix bot for bridge messages between matrix and social network <a class="linkified" href="http://vk.com/" target="_blank" rel="noopener">vk.com</a> (russian analog of facebook). <a class="linkified" href="https://github.com/progserega/MatrixVkBot" target="_blank" rel="noopener">https://github.com/progserega/MatrixVkBot</a></p>
</blockquote>
<p><a class="mx_UserPill" title="@alphapapa:matrix.org" data-reactroot="">alphapapa</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$154695472523162AwgHe:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>matrix-client.el gained a room-list buffer, which can be sorted by unread status, name, number of members, etc, and has a right-click context menu like the room-list sidebar.</p>
<p>matrix-client.el gained right-click context menus in the room sidebar, allowing to set room priority, notifications, etc.</p>
<p>The matrix-client.el git repository has moved to: <a class="linkified" href="https://github.com/alphapapa/matrix-client.el" target="_blank" rel="noopener">https://github.com/alphapapa/matrix-client.el</a></p>
</blockquote>
<blockquote>
<img src="/_matrix/media/v1/thumbnail/matrix.org/pazISIZUgGDcnjDoNVsesfcK?width=800&height=600" alt="" />
</blockquote>
<p><a class="mx_UserPill" title="@pztrn:pztrn.name" data-reactroot="">Stanislav N. aka pztrn</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1546968693283SdOAl:pztrn.name" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Hey guys, joined here to post another thing that works in Matrix <a class="linkified" href="https://gitlab.com/pztrn/check_mk_matrix_notifications" target="_blank" rel="noopener">https://gitlab.com/pztrn/check_mk_matrix_notifications </a>it is a script that sends check_mk notifications to Matrix. Check_mk is a "plugin" for Nagios NMS.</p>
</blockquote>
<p><a class="mx_UserPill" title="@cadair:cadair.com" data-reactroot="">Cadair</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$15470473371239VXjIe:cadair.com" rel="noopener">reports that</a>:</p>
<blockquote>
<p>It's not my update but I saw this HomeAssistant addon for matrix (<a class="linkified" href="https://github.com/hassio-addons/addon-matrix" target="_blank" rel="noopener">https://github.com/hassio-addons/addon-matrix</a>) and wanted to make sure it got a shoutout on TWIM. [Seeing how nobody else has posted it in here, just on twitter etc.]</p>
</blockquote>
<p><a class="mx_UserPill" title="@thrrgilag:monkeystew.net" data-reactroot="">Morgan McMillian (thrrgilag)</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1547094717202jRnpX:monkeystew.net" rel="noopener">reports that</a>:</p>
<blockquote>
<p>I published v1.0.1 of the pnut-matrix bridge this week which brings public <a class="linkified" href="http://pnut.io/" target="_blank" rel="noopener">pnut.io</a> chat rooms to the matrix network. Features include syncing of <a class="linkified" href="http://pnut.io/" target="_blank" rel="noopener">pnut.io</a> names and avatars, matrix users ability to authorize their <a class="linkified" href="http://pnut.io/" target="_blank" rel="noopener">pnut.io</a> accounts, and administrative controls for managing linked rooms. Project can be found at <a class="linkified" href="https://gitlab.dreamfall.space/thrrgilag/pnut-matrix" target="_blank" rel="noopener">https://gitlab.dreamfall.space/thrrgilag/pnut-matrix</a> and discussion is at <a class="linkified" href="https://matrix.to/#/#pnut-matrix:monkeystew.net" rel="noopener">#pnut-matrix:monkeystew.net</a></p>
</blockquote>
<p><a class="mx_UserPill" title="@MilkManzJourDaddy:matrix.org" data-reactroot="">MMJD reports that</a>:</p>
<blockquote>
<p>ma1uta's <a href="https://github.com/ma1uta/mxtoot" target="_blank" rel="noopener">MXToot</a> deserves mention in the blog, and in <a class="linkified" href="/docs/projects/try-matrix-now.html" target="_blank" rel="noopener">https://matrix.org/docs/projects/try-matrix-now.html</a> . People should not be wanting of Twitter over Decentralized-Federated F(L)OSS feeds in their Matrix room.</p>
</blockquote>
<p><a class="mx_UserPill" title="@uforia:matrix.org" data-reactroot="">uforia</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1547186475565850IXaEN:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>in the <a href="https://github.com/koma-im/" target="_blank" rel="noopener">koma</a> project, the desktop client <a href="https://github.com/koma-im/continuum-desktop" target="_blank" rel="noopener">continuum</a> now does a full sync when the user account doesn't seem to have joined any chat rooms, this way, it can recover from some disk IO errors, or more commonly, unclean shutdowns. A ca-certificates issue with Java 11 on Debian stable was found while running a bot on a headless server, more details and the solution is in the <a href="https://github.com/koma-im/kotlin-matrix-userbots" target="_blank" rel="noopener">README</a></p>
</blockquote>
<p><a class="mx_UserPill" title="@vabd:weu.informo.network" data-reactroot="">vabd</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1547200800194qJslv:weu.informo.network" rel="noopener">reports that</a>:</p>
<blockquote>
<p>Our first specs proposal of 2019 just landed in the form of <a href="https://github.com/Informo/specs/pull/16" target="_blank" rel="noopener">SCS #16</a>, which specifies the data/event structure for trust authorities. This is a big step as TAs play a key role in Informo's trust/reputation system!</p>
<p>In the meantime, we've also opened <a href="https://github.com/Informo/specs/pull/19" target="_blank" rel="noopener">SCS #19</a>, which proposes a rework of the specs' introduction with the idea to give newcomers a more accessible and immediate way to figure out what Informo is about, and give them some starting points so they can dive deeper into it if interested. It's a rather small one and we'd love people to give it a look so we can aim for the most newcomer-friendly version possible</p>
</blockquote>
<blockquote>
<p>We've also just opened <a href="https://github.com/Informo/specs/pull/21" target="_blank" rel="noopener">SCS #21</a> which specifies a way for a source to change the Matrix user it uses to publish articles (e.g. if it was previously using a server managed by non trustworthy people). As with all of our proposals introducing changes in behaviour, it's open for people to share their comments on it for the next 7 days.</p>
</blockquote>
<p><a class="mx_UserPill" title="@max:kamax.io" data-reactroot="">Maximus</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$154722612268rqIxJ:kamax.io" rel="noopener">reports that</a>:</p>
<blockquote>
<p>The <a href="https://github.com/kamax-matrix/mxisd/releases/tag/v1.3.0-alpha.1" target="_blank" rel="noopener">first alpha release</a> for <a href="https://github.com/kamax-matrix/mxisd" target="_blank" rel="noopener">mxisd</a> v1.3.0 has been released with already major performance improvements. Early testing and reporting about success/failure would be very much appreciated as v1.3.0 will break backward compatibility. We have been running it on our own servers for about a week now and feels really good and stable.</p>
</blockquote>
<p><a class="mx_UserPill" title="@friedger:matrix.org" data-reactroot="">Friedger Müffke</a> <a href="https://riot.im/develop/#/room/!FPUfgzXYWTKgIrwKxW:matrix.org/$1547227403100378dwHlJ:matrix.org" rel="noopener">reports that</a>:</p>
<blockquote>
<p>I just launched <a href="https://chat.openintents.org">OI Chat</a>, a matrix service dedicated to Blockstack users (<a class="linkified" href="https://www.producthunt.com/posts/oi-chat" target="_blank" rel="noopener">https://www.producthunt.com/posts/oi-chat</a>).</p>
<p>It is a home server that does not rely on any passwords but on cryptography and user-owned storage.</p>
<p>OI Chat uses one-time logins to verify the ownership of a username that can only be created by the user if they control the blockstack account.</p>
</blockquote>
<p>...and that's all this week, folks!  Your normal hand-crafted artisanal benpa confectionery will be back next week.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2019&#x2F;01&#x2F;10&#x2F;critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1&#x2F;" title="Critical Security Update: Synapse 0.34.0.1&#x2F;Synapse 0.34.1.1">Critical Security Update: Synapse 0.34.0.1&#x2F;Synapse 0.34.1.1</a></h2>
                <span>
                    10.01.2019 00:00
                    —
                    <a href="/category/security">
                        Security
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>After releasing Synapse v0.34.1, we have become aware of a security vulnerability affecting all previous versions (<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-5885">CVE-2019-5885</a>). v0.34.1 closed the vulnerability but, in some cases, caused users to be logged out of their clients, so we do not recommend v0.34.1 for production use.</p>
<p><b>Today we release two mitigating versions v0.34.0.1 and v0.34.1.1</b>. Both versions close the vulnerability and will not cause users to be logged out. <b>All installations should be upgraded to one or other immediately.</b></p>
<ul>
 	<li style="font-weight: 400;">Admins who would otherwise upgrade to v0.34.1 (or those that have already done so) should upgrade to v0.34.1.1. 
</li>
 	<li style="font-weight: 400;">Admins on v0.34.0, who do not wish to bring in new non-security related behaviour, should upgrade to v0.34.0.1.
</li>
</ul>
<p>You can get the new updates for <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0.1">v0.34.0.1</a> and <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.1.1">v0.34.1.1</a> here or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. See also our <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<p>We will publish more details of the vulnerability once admins have had a chance to upgrade. To our knowledge the vulnerability has not been exploited in the wild.</p>
<p>Many thanks for your patience, we are moving ever closer to Synapse reaching v1.0, and fixes like this one edge us ever closer.</p>
<p>Thanks also to the package maintainers who have coordinated with us to ensure distro packages are available for a speedy upgrade!</p>
<ul>
 	<li><a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0.1">Synapse v0.34.0.1 Changelog</a></li>
 	<li><a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.1.1">Synapse v0.34.1.1 Changelog</a></li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2018&#x2F;12&#x2F;21&#x2F;porting-synapse-to-python-3&#x2F;" title="Porting Synapse to Python 3">Porting Synapse to Python 3</a></h2>
                <span>
                    21.12.2018 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Matrix's reference homeserver, Synapse, is written in Python and uses the Twisted networking framework to power its bitslinging across the Internet. The Python version used has been strictly Python 2.7, the last supported version of Python 2, but as of this week that changes! Since Twisted and our other upstream dependencies now support the newest version of Python, Python 3, we are now able to finish the jump and port Synapse to use it by default. The port has been done in a backwards compatible way, written in a subset of Python that is usable in both Python 2 and Python 3, meaning your existing Synapse installs still work on Python 2, while preparing us for a Python 3 future.</p>
<h2 id="why-port">Why port?</h2>
<p>Porting Synapse to Python 3 prepares Synapse for a post-Python 2 world, currently scheduled for 2020. After the 1st of January in 2020, Python 2 will no longer be supported by the core Python developers and no bugfixes (even critical security ones) will be issued. As the security of software depends very much on the runtime and libraries it is running on top of, this means that by then all Python 2 software in use should have moved to Python 3 or other runtimes.</p>
<p>The Python 3 port has benefits other than just preparing for the End of Life of Python 2.7. Successive versions of Python 3 have improved the standard library, provided newer and clearer syntax for asynchronous code, added opt-in static typing to reduce bugs, and contained incremental performance and memory management improvements. These features, once Synapse stops supporting Python 2, can then be fully utilised to make Synapse's codebase clearer and more performant. One bonus that we get immediately, though, is Python 3's memory compaction of Unicode strings. Rather than storing as UCS-2/UTF-16 or UCS-4/UTF-32, it will instead store it in the smallest possible representation giving a 50%-75% memory improvement for strings only containing Latin-1 characters, such as nearly all dictionary keys, hashes, IDs, and a large proportion of messages being processed from English speaking countries. Non-English text will also see a memory improvement, as it can be commonly stored in only two bytes instead of the four in a UCS-4 “wide” Python 2 build.</p>
<p><i>Editor's note: If you were wondering how this fits in with Dendrite (the next-gen golang homeserver): our plan is to use Synapse as the reference homeserver for all the current work going on with landing a 1.0 release of the Matrix spec: it makes no sense to try to iterate and converge on 1.0 on both Synapse and Dendrite in parallel. In order to prove that the 1.0 spec is indeed fit for purpose we then also need Synapse to exit beta and hit a 1.0 too, hence the investment to get it there. It's worth noting that over the last year we've been plugging away solidly improving Synapse in general (especially given the increasing number of high-profile deployments out there), so we're committed to getting Synapse to a formal production grade release and supporting it in the long term. Meanwhile, Dendrite development is still progressing - currently acting as a place to experiment with more radical blue-sky architectural changes, especially in low-footprint or even clientside homeservers. We expect it to catch up with Synapse once 1.0 is out the door; and meanwhile Synapse is increasingly benefiting from performance work inspired by Dendrite.
</i></p>
<h2 id="when-will-the-port-be-released">When will the port be released?</h2>
<p>The port is has been released in a “production ready” form in <a href="/blog/2018/12/20/synapse-0-34-0-released/">Synapse 0.34.0</a>, supporting Python 3.5, 3.6, and 3.7. This will work on installations with and without workers.</p>
<h2 id="what-s-it-like-in-the-real-world">What's it like in the real world?</h2>
<p>Beta testers of the Python 3 port have reported lower memory usage, including lower memory “spikes” and slower memory growth. You can see this demonstrated on matrix.org:</p>
<p><a href="/blog/wp-content/uploads/2018/12/image3.png"><img class="alignnone size-large wp-image-3830" src="/blog/wp-content/uploads/2018/12/image3-1024x223.png" alt="" width="1024" height="223" /></a></p>
<p>See 10/15, ~20:00 for the Python 3 migration. This is on some of the Synchrotrons on matrix.org.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image1.png"><img class="alignnone size-large wp-image-3824" src="/blog/wp-content/uploads/2018/12/image1-1024x237.png" alt="" width="1024" height="237" /></a></p>
<p>See ~11/8 for the Python 3 migration. This is on the Synapse master on matrix.org.</p>
<p>We have also noticed some better CPU utilisation:</p>
<p><span style="font-weight: 400;"><a href="/blog/wp-content/uploads/2018/12/image2.png"><img class="alignnone size-large wp-image-3822" src="/blog/wp-content/uploads/2018/12/image2-1024x296.png" alt="" width="1024" height="296" /></a>
</span>
See 21:30 for the migration of federation reader 1, and 21:55 for the others. The federation reader is a particular pathological case, where the replacement of lists with iterators internally on Python 3 has given us some big boosts.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image4.png"><img class="alignnone size-large wp-image-3829" src="/blog/wp-content/uploads/2018/12/image4-1024x296.png" alt="" width="1024" height="296" /></a></p>
<p>See 10/15, 4:00.The CPU utilisation has gone down on synchrotron 1 after the Python 3 migration, but not as dramatically as the federation reader. Synchrotron 3 was migrated a few days later.</p>
<p>As some extra data-points, my personal HS consumes about 300MB now at initial start, and grows to approximately 800MB -- under Python 2 the growth would be near-immediate to roughly 1.4GB.</p>
<h2 id="where-to-from-here">Where to from here?</h2>
<p>Python 2 is still a supported platform for running Synapse for the time being. We plan on ending mainstream support on 1st April 2019, where upon Python 3.5+ will be the only officially supported platform. Additionally, we will give notice ahead of time once we are ready to remove Python 2.7 compatibility from the codebase (which will be no sooner than 1st April). Although slightly inconvenient, we hope that this gives our users and integrators adequate time to migrate, whilst giving us the flexibility to use modern Python features and make Synapse a better piece of software to help power the Matrix community.</p>
<h2 id="how-can-i-try-it">How can I try it?</h2>
<p>The port is compatible with existing homeservers and configurations, so if you install Synapse inside a Python 3 virtualenv, you can run it from there. Of course, this differs based on your installation method, operating system, and what version of Python 3 you wish to use. Full upgrade notes live <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">here</a> but if you're having problems or want to discuss specific packagings of Synapse please come ask in <a href="https://matrix.to/#/#synapse:matrix.org">#synapse:matrix.org</a>.</p>
<h2 id="thanks">Thanks</h2>
<p>Many thanks go to fellow Synapse developers Erik and Rich for code review, as well as community contributors such as notafile and krombel for laying the foundations many months ago allowing this port to happen. Without them, this wouldn't have happened.</p>
<p>Happy Matrixing,</p>
<p>Amber Brown (hawkowl)</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2018&#x2F;12&#x2F;20&#x2F;synapse-0-34-0-released&#x2F;" title="Synapse 0.34.0 released!">Synapse 0.34.0 released!</a></h2>
                <span>
                    20.12.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Folks this is a big day for us at Matrix Towers, because today we release 0.34.0.</p>
<p>The big news for 0.34.0 is that we now <strong>recommend Python 3 for production use</strong> and have been running matrix.org under Python 3 for the past month.</p>
<p>Performance improvements have been marked, in some contexts we have seen 50% reductions in RAM and CPU usage. Here are some illustrative graphs to get you going but look out for a dedicated post delving into much more detail on the port. You can also see a Matrix Live interview with the project lead Amber (hawkowl) <a href="https://www.youtube.com/watch?v=Ad3oqEo5leM">here</a>.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image2.png"><img class="alignnone wp-image-3822 size-large" src="/blog/wp-content/uploads/2018/12/image2-1024x296.png" alt="" width="1024" height="296" /></a></p>
<p>Matrix.org federation reader workers, the big drops signify roll over to python 3</p>
<p><a href="/blog/wp-content/uploads/2018/12/image1.png"><img class="alignnone size-large wp-image-3824" src="/blog/wp-content/uploads/2018/12/image1-1024x237.png" alt="" width="1024" height="237" /></a></p>
<p>Synapse master on matrix.org, again the drop in RAM signifies the roll over to python 3</p>
<p>Many thanks to Amber for leading the effort, Rich and Erik for providing support as well as Notafile and Krombel from the community for pushing this effort right from the early days of the project.</p>
<p>If that wasn't enough, 0.34.0 also all the usual bug fixes and perf improvements. In particular the media repository now no longer fails to decode UTF-8 filenames when downloading remote media and auto joining rooms now work on servers with consent requirements enabled.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<p>In particular, if you want to run Synapse 0.34.0 on Python 3 take a look at the <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">upgrade notes</a>.</p>
<h3 id="synapse-0-34-0-changelog">Synapse 0.34.0 changelog</h3>
<p>Synapse 0.34.0 is the first release to fully support Python 3. Synapse will now run on Python versions 3.5 or 3.6 (as well as 2.7). Support for Python 3.7 remains experimental.</p>
<p>We recommend upgrading to Python 3, but make sure to read the <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">upgrade notes</a> when doing so.</p>
<h4 id="features">Features</h4>
<ul>
 	<li>Add 'sandbox' to CSP for media reprository (<a href="https://github.com/matrix-org/synapse/issues/4284" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4284/hovercard" aria-describedby="hovercard-aria-description">#4284</a>)</li>
 	<li>Make the new landing page prettier. (<a href="https://github.com/matrix-org/synapse/issues/4294" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4294/hovercard" aria-describedby="hovercard-aria-description">#4294</a>)</li>
 	<li>Fix deleting E2E room keys when using old SQLite versions. (<a href="https://github.com/matrix-org/synapse/issues/4295" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4295/hovercard" aria-describedby="hovercard-aria-description">#4295</a>)</li>
 	<li>Add a welcome page for the client API port. Credit to <a class="user-mention" href="https://github.com/krombel" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@krombel</a>! (<a href="https://github.com/matrix-org/synapse/issues/4289" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4289/hovercard" aria-describedby="hovercard-aria-description">#4289</a>)</li>
 	<li>Remove Matrix console from the default distribution (<a href="https://github.com/matrix-org/synapse/issues/4290" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4290/hovercard" aria-describedby="hovercard-aria-description">#4290</a>)</li>
 	<li>Add option to track MAU stats (but not limit people) (<a href="https://github.com/matrix-org/synapse/issues/3830" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3830/hovercard" aria-describedby="hovercard-aria-description">#3830</a>)</li>
 	<li>Add an option to enable recording IPs for appservice users (<a href="https://github.com/matrix-org/synapse/issues/3831" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3831/hovercard" aria-describedby="hovercard-aria-description">#3831</a>)</li>
 	<li>Rename login type <code>m.login.cas</code> to <code>m.login.sso</code> (<a href="https://github.com/matrix-org/synapse/issues/4220" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4220/hovercard" aria-describedby="hovercard-aria-description">#4220</a>)</li>
 	<li>Add an option to disable search for homeservers that may not be interested in it. (<a href="https://github.com/matrix-org/synapse/issues/4230" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4230/hovercard" aria-describedby="hovercard-aria-description">#4230</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Pushrules can now again be made with non-ASCII rule IDs. (<a href="https://github.com/matrix-org/synapse/issues/4165" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4165/hovercard" aria-describedby="hovercard-aria-description">#4165</a>)</li>
 	<li>The media repository now no longer fails to decode UTF-8 filenames when downloading remote media. (<a href="https://github.com/matrix-org/synapse/issues/4176" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4176/hovercard" aria-describedby="hovercard-aria-description">#4176</a>)</li>
 	<li>URL previews now correctly decode non-UTF-8 text if the header contains a <code>&lt;meta http-equiv="Content-Type"</code> header. (<a href="https://github.com/matrix-org/synapse/issues/4183" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4183/hovercard" aria-describedby="hovercard-aria-description">#4183</a>)</li>
 	<li>Fix an issue where public consent URLs had two slashes. (<a href="https://github.com/matrix-org/synapse/issues/4192" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4192/hovercard" aria-describedby="hovercard-aria-description">#4192</a>)</li>
 	<li>Fallback auth now accepts the session parameter on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4197" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4197/hovercard" aria-describedby="hovercard-aria-description">#4197</a>)</li>
 	<li>Remove riot.im from the list of trusted Identity Servers in the default configuration (<a href="https://github.com/matrix-org/synapse/issues/4207" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4207/hovercard" aria-describedby="hovercard-aria-description">#4207</a>)</li>
 	<li>fix start up failure when mau_limit_reserved_threepids set and db is postgres (<a href="https://github.com/matrix-org/synapse/issues/4211" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4211/hovercard" aria-describedby="hovercard-aria-description">#4211</a>)</li>
 	<li>Fix auto join failures for servers that require user consent (<a href="https://github.com/matrix-org/synapse/issues/4223" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4223/hovercard" aria-describedby="hovercard-aria-description">#4223</a>)</li>
 	<li>Fix exception caused by non-ascii event IDs (<a href="https://github.com/matrix-org/synapse/issues/4241" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4241/hovercard" aria-describedby="hovercard-aria-description">#4241</a>)</li>
 	<li>Pushers can now be unsubscribed from on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4250" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4250/hovercard" aria-describedby="hovercard-aria-description">#4250</a>)</li>
 	<li>Fix UnicodeDecodeError when postgres is configured to give non-English errors (<a href="https://github.com/matrix-org/synapse/issues/4253" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4253/hovercard" aria-describedby="hovercard-aria-description">#4253</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>Debian packages utilising a virtualenv with bundled dependencies can now be built. (<a href="https://github.com/matrix-org/synapse/issues/4212" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4212/hovercard" aria-describedby="hovercard-aria-description">#4212</a>)</li>
 	<li>Disable pager when running git-show in CI (<a href="https://github.com/matrix-org/synapse/issues/4291" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4291/hovercard" aria-describedby="hovercard-aria-description">#4291</a>)</li>
 	<li>A coveragerc file has been added. (<a href="https://github.com/matrix-org/synapse/issues/4180" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4180/hovercard" aria-describedby="hovercard-aria-description">#4180</a>)</li>
 	<li>Add a GitHub pull request template and add multiple issue templates (<a href="https://github.com/matrix-org/synapse/issues/4182" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4182/hovercard" aria-describedby="hovercard-aria-description">#4182</a>)</li>
 	<li>Update README to reflect the fact that <a href="https://github.com/matrix-org/synapse/issues/1491" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/1491/hovercard" aria-describedby="hovercard-aria-description">#1491</a> is fixed (<a href="https://github.com/matrix-org/synapse/issues/4188" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4188/hovercard" aria-describedby="hovercard-aria-description">#4188</a>)</li>
 	<li>Run the AS senders as background processes to fix warnings (<a href="https://github.com/matrix-org/synapse/issues/4189" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4189/hovercard" aria-describedby="hovercard-aria-description">#4189</a>)</li>
 	<li>Add some diagnostics to the tests to detect logcontext problems (<a href="https://github.com/matrix-org/synapse/issues/4190" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4190/hovercard" aria-describedby="hovercard-aria-description">#4190</a>)</li>
 	<li>Add missing <code>jpeg</code> package prerequisite for OpenBSD in README. (<a href="https://github.com/matrix-org/synapse/issues/4193" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4193/hovercard" aria-describedby="hovercard-aria-description">#4193</a>)</li>
 	<li>Add a note saying you need to manually reclaim disk space after using the Purge History API (<a href="https://github.com/matrix-org/synapse/issues/4200" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4200/hovercard" aria-describedby="hovercard-aria-description">#4200</a>)</li>
 	<li>More logcontext checking in unittests (<a href="https://github.com/matrix-org/synapse/issues/4205" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4205/hovercard" aria-describedby="hovercard-aria-description">#4205</a>)</li>
 	<li>Ignore <code>__pycache__</code> directories in the database schema folder (<a href="https://github.com/matrix-org/synapse/issues/4214" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4214/hovercard" aria-describedby="hovercard-aria-description">#4214</a>)</li>
 	<li>Add note to UPGRADE.rst about removing riot.im from list of trusted identity servers (<a href="https://github.com/matrix-org/synapse/issues/4224" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4224/hovercard" aria-describedby="hovercard-aria-description">#4224</a>)</li>
 	<li>Added automated coverage reporting to CI. (<a href="https://github.com/matrix-org/synapse/issues/4225" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4225/hovercard" aria-describedby="hovercard-aria-description">#4225</a>)</li>
 	<li>Garbage-collect after each unit test to fix logcontext leaks (<a href="https://github.com/matrix-org/synapse/issues/4227" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4227/hovercard" aria-describedby="hovercard-aria-description">#4227</a>)</li>
 	<li>add more detail to logging regarding "More than one row matched" error (<a href="https://github.com/matrix-org/synapse/issues/4234" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4234/hovercard" aria-describedby="hovercard-aria-description">#4234</a>)</li>
 	<li>Drop sent_transactions table (<a href="https://github.com/matrix-org/synapse/issues/4244" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4244/hovercard" aria-describedby="hovercard-aria-description">#4244</a>)</li>
 	<li>Add a basic .editorconfig (<a href="https://github.com/matrix-org/synapse/issues/4257" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4257/hovercard" aria-describedby="hovercard-aria-description">#4257</a>)</li>
 	<li>Update README.rst and UPGRADE.rst for Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4260" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4260/hovercard" aria-describedby="hovercard-aria-description">#4260</a>)</li>
 	<li>Remove obsolete <code>verbose</code> and <code>log_file</code> settings from <code>homeserver.yaml</code> for Docker image. (<a href="https://github.com/matrix-org/synapse/issues/4261" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4261/hovercard" aria-describedby="hovercard-aria-description">#4261</a>)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;neil-johnson&#x2F;page&#x2F;4&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">5 / 7</span>
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;author&#x2F;neil-johnson&#x2F;page&#x2F;6&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;support">Donate</a>
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org">Shop</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org" rel="me"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;" rel="me"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix" rel="me"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg" rel="me"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w" rel="me"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
            <a href="&#x2F;atom.xml" rel="me"><img src="/assets/rss.svg" alt="RSS"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
