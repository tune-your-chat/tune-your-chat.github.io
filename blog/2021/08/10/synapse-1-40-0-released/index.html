<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />
    
    <meta property="og:url" content="https:&#x2F;&#x2F;tune-your-chat.github.io&#x2F;blog&#x2F;2021&#x2F;08&#x2F;10&#x2F;synapse-1-40-0-released&#x2F;" />
    
    
    
    
    <meta property="og:title" content="Synapse 1.40.0 released" />
    
    
    
    <meta property="og:description" content="Matrix, the open protocol for secure decentralised communications" />
    <meta name="description" content="Matrix, the open protocol for secure decentralised communications" />
    
    <meta property="og:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    <meta name="twitter:image" content="https://matrix.org/blog/img/matrix-logo.png" />
    
    <title>Matrix.org - Synapse 1.40.0 released</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href=https://tune-your-chat.github.io/style.css?h=0d1a23c06b707a231261 />
    <script async src=https://tune-your-chat.github.io/js/components.js?h=ae3cb894d00e16ef08be></script>
    <script defer data-domain="matrix.org" src="https://plausible.io/js/script.tagged-events.js"></script>


    
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Synapse 1.40.0 released",
    "datePublished": "2021-08-10T00:00+00:00",
    
    
    "image": [
        "https://matrix.org/blog/img/matrix-logo.png"
    ],
    
    "author": [
    
    {
        "@type": "Person",
        "name": "Dan Callahan",
        "url": "https://tune-your-chat.github.io/authors/dan-callahan"
    }
    
    ]
}
</script>
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="https:&#x2F;&#x2F;spec.matrix.org" class="
            ">
            Spec
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="foundation-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="foundation-submenu-checkbox" class="submenu-title">Foundation <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;foundation&#x2F;about&#x2F;">About Matrix</a>
                    
                    <a href="&#x2F;foundation&#x2F;governing-board-elections&#x2F;">Governing Board Elections 2024</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Docs
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;tune&#x2F;">Tune Your Chat</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;support" class="
            ">
            Donate
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<article class="content post with-sidebar">
    <header>
        <h1>Synapse 1.40.0 released</h1>
        <span>
            10.08.2021 00:00
            
            —
            <a href="/category/releases">Releases</a>
            
            —
            <a
                href="/author/dan-callahan">Dan Callahan</a>
            
        </span>
        
    </header>
    <div class="post-main">
        <div class="post-content">
            <p>Synapse 1.40.0 is out now!</p>
<h2 id="support-for-room-version-8">Support for Room Version 8</h2>
<p>This release of Synapse includes stable support for <a href="https://github.com/matrix-org/matrix-doc/pull/3289">Room Version 8</a>! Version 8 codifies a concept of "<a href="https://github.com/matrix-org/matrix-doc/pull/3083">restricted rooms</a>" which are private rooms joinable only by direct invitation or by being a member of other, designated Spaces / rooms.</p>
<p>This means you can create a Matrix Space for your company, team, or guild, and instead of inviting people to the Space <em>and</em> directly to a bunch of private rooms, you can simply configure your private rooms such that membership in the Space <em>automatically</em> confers access to the private rooms.</p>
<p>This is a major improvement to access control in Matrix, and we can't wait to use it ourselves.</p>
<p>Note that client support for managing restricted rooms is still forthcoming, and you'll want to ensure that your users are on homeservers which support v8 before upgrading existing rooms. To ensure compatibility across federation, the default for newly created rooms remains at v6 for the time being.</p>
<h2 id="everything-else">Everything Else</h2>
<p>A few other items worth calling out:</p>
<ul>
<li>Synapse can now optionally recycle PostgreSQL connections after a specified number of transactions (<a href="https://github.com/matrix-org/synapse/pull/10440">#10440</a>), which may mitigate slow memory leaks in the database. Thanks to GitHub user hifi.</li>
<li>We have a whole new documentation page explaining <a href="https://matrix-org.github.io/synapse/v1.40/development/room-dag-concepts.html">Room DAG Concepts</a> like depth, stream ordering, extremities, outliers, and state groups.</li>
<li>The <a href="https://matrix-org.github.io/synapse/v1.40/admin_api/user_admin_api.html#list-accounts">Admin API for listing accounts</a> now returns a <code>creation_ts</code> property indicating when an account was created. Thanks to work by dklimpel.</li>
<li>Synapse should better detect character encodings in URL previews thanks to a contribution by srividyut.</li>
</ul>
<p>In addition to further work towards implementing <a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716: Incrementally Importing History into Existing Rooms</a>, we've landed support for:</p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2033">MSC2033</a>: The <code>/account/whoami</code> endpoint now includes the <code>device_id</code> associated with the access token used to make the request.</li>
<li>(Experimental) <a href="https://github.com/matrix-org/matrix-doc/pull/3244">MSC3244</a>: The <code>/_matrix/client/r0/capabilities</code> endpoint may include metadata about which room versions support which capabilities (like knocking on restricted joins).</li>
<li>(Experimental) <a href="https://github.com/matrix-org/matrix-doc/pull/2285">MSC2285</a>: Clients may mark messages as read on the server without updating their externally visible read receipts, implemented by SimonBrandner.</li>
</ul>
<p>These are just the highlights; please see the <a href="https://github.com/matrix-org/synapse/blob/v1.40.0/CHANGES.md">Release Notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/hifi">hifi</a>, <a href="https://github.com/SimonBrandner">SimonBrandner</a>, and <a href="https://github.com/srividyut">srividyut</a>.</p>

            <div class="callout">
                <div class="left-col">
                    <h2>The Foundation needs you</h2>
                </div>
                <div class="right-col">
                    <p>
                        The Matrix.org Foundation is a non-profit and only relies
                        on donations to operate. Its core mission is to maintain
                        the Matrix Specification, but it does much more than that.
                    </p>
                    <p>
                        It maintains the matrix.org homeserver and hosts several
                        bridges for free. It fights for our collective rights to
                        digital privacy and dignity.
                    </p>
                    <a class="call-to-action plausible-event-name=BlogPostCtaSupportUs" href="/support">Support us</a>
                </div>
            </div>
        </div>
        
        <aside>
            <h3>Post Contents</h3>

            <ul style="list-style: none; padding-left: 0px;">
                
                <li>
                    <a href="https://tune-your-chat.github.io/blog/2021/08/10/synapse-1-40-0-released/#support-for-room-version-8">Support for Room Version 8</a>
                    
                </li>
                
                <li>
                    <a href="https://tune-your-chat.github.io/blog/2021/08/10/synapse-1-40-0-released/#everything-else">Everything Else</a>
                    
                </li>
                
            </ul>
        </aside>
        
    </div>
</article>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;support">Donate</a>
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org">Shop</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org" rel="me"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;" rel="me"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix" rel="me"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg" rel="me"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w" rel="me"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
            <a href="&#x2F;atom.xml" rel="me"><img src="/assets/rss.svg" alt="RSS"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
